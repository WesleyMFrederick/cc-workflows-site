{
  "version": 3,
  "sources": ["../../../../node_modules/@git-diff-view/utils/dist/esm/index.mjs", "../../../../node_modules/@git-diff-view/vue/src/context/provider.ts", "../../../../node_modules/@git-diff-view/vue/src/context/inject.ts", "../../../../node_modules/@git-diff-view/vue/src/hooks/useIsMounted.ts", "../../../../node_modules/@git-diff-view/vue/src/hooks/useProvide.ts", "../../../../node_modules/@git-diff-view/vue/src/hooks/useSubscribeDiffFile.ts", "../../../../node_modules/@git-diff-view/vue/src/hooks/useTextWidth.ts", "../../../../node_modules/@git-diff-view/vue/src/components/DiffAddWidget.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffNoNewLine.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffContent.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitContentLineNormal.tsx", "../../../../node_modules/@git-diff-view/vue/src/hooks/useDomWidth.ts", "../../../../node_modules/@git-diff-view/vue/src/hooks/useSyncHeight.ts", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitExtendLineNormal.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffExpand.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitHunkLineNormal.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitWidgetLineNormal.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitViewNormal.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitContentLineWrap.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitExtendLineWrap.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitHunkLineWrap.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitWidgetLineWrap.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitViewWrap.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffSplitView.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffUnifiedContentLine.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffUnifiedExtendLine.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffUnifiedHunkLine.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffUnifiedWidgetLine.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffUnifiedView.tsx", "../../../../node_modules/@git-diff-view/vue/src/components/DiffView.tsx"],
  "sourcesContent": ["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar _TextMeasure_instances, _TextMeasure_key, _TextMeasure_map, _TextMeasure_getInstance;\nlet canvasCtx = null;\nconst getKey = (font, text) => {\n    return `${font.fontFamily}-${font.fontStyle}-${font.fontSize}-${text}`;\n};\nconst getStableKey = (font, text) => {\n    return getKey(font, \"0\".repeat(text.length));\n};\nclass TextMeasure {\n    constructor() {\n        _TextMeasure_instances.add(this);\n        _TextMeasure_key.set(this, \"\");\n        _TextMeasure_map.set(this, {});\n    }\n    measure(text, font) {\n        const currentKey = getStableKey(font, text);\n        if (__classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey]) {\n            return __classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey];\n        }\n        const instance = __classPrivateFieldGet(this, _TextMeasure_instances, \"m\", _TextMeasure_getInstance).call(this);\n        if (font) {\n            const currentFontKey = `${font.fontFamily}-${font.fontStyle}-${font.fontSize}`;\n            if (__classPrivateFieldGet(this, _TextMeasure_key, \"f\") !== currentFontKey) {\n                __classPrivateFieldSet(this, _TextMeasure_key, currentFontKey, \"f\");\n                instance.font = `${font.fontStyle || \"\"} ${font.fontSize || \"\"} ${font.fontFamily || \"\"}`;\n            }\n        }\n        else {\n            instance.font = \"\";\n        }\n        const textWidth = instance.measureText(text).width;\n        return textWidth;\n    }\n}\n_TextMeasure_key = new WeakMap(), _TextMeasure_map = new WeakMap(), _TextMeasure_instances = new WeakSet(), _TextMeasure_getInstance = function _TextMeasure_getInstance() {\n    canvasCtx = canvasCtx || document.createElement(\"canvas\").getContext(\"2d\");\n    return canvasCtx;\n};\nlet instance = null;\nconst getTextMeasureInstance = () => {\n    instance = instance || new TextMeasure();\n    return instance;\n};\n\nconst addContentBGName = \"--diff-add-content--\";\nconst delContentBGName = \"--diff-del-content--\";\nconst borderColorName = \"--diff-border--\";\nconst addLineNumberBGName = \"--diff-add-lineNumber--\";\nconst delLineNumberBGName = \"--diff-del-lineNumber--\";\nconst plainContentBGName = \"--diff-plain-content--\";\nconst expandContentBGName = \"--diff-expand-content--\";\nconst plainLineNumberColorName = \"--diff-plain-lineNumber-color--\";\nconst expandLineNumberColorName = \"--diff-expand-lineNumber-color--\";\nconst plainLineNumberBGName = \"--diff-plain-lineNumber--\";\nconst expandLineNumberBGName = \"--diff-expand-lineNumber--\";\nconst hunkContentBGName = \"--diff-hunk-content--\";\nconst hunkContentColorName = \"--diff-hunk-content-color--\";\nconst hunkLineNumberBGName = \"--diff-hunk-lineNumber--\";\nconst hunkLineNumberBGHoverName = \"--diff-hunk-lineNumber-hover--\";\nconst addContentHighlightBGName = \"--diff-add-content-highlight--\";\nconst delContentHighlightBGName = \"--diff-del-content-highlight--\";\nconst addWidgetBGName = \"--diff-add-widget--\";\nconst addWidgetColorName = \"--diff-add-widget-color--\";\nconst emptyBGName = \"--diff-empty-content--\";\nconst getContentBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addContentBGName})`\n        : isDelete\n            ? `var(${delContentBGName})`\n            : hasDiff\n                ? `var(${plainContentBGName})`\n                : `var(${expandContentBGName})`;\n};\nconst getLineNumberBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addLineNumberBGName})`\n        : isDelete\n            ? `var(${delLineNumberBGName})`\n            : hasDiff\n                ? `var(${plainLineNumberBGName})`\n                : `var(${expandLineNumberBGName})`;\n};\n\nconst removeAllSelection = () => {\n    const selection = window.getSelection();\n    for (let i = 0; i < selection.rangeCount; i++) {\n        selection.removeRange(selection.getRangeAt(i));\n    }\n};\nconst syncScroll = (left, right) => {\n    const onScroll = function (event) {\n        if (event === null || event.target === null)\n            return;\n        if (event.target === left) {\n            right.scrollTop = left.scrollTop;\n            right.scrollLeft = left.scrollLeft;\n        }\n        else {\n            left.scrollTop = right.scrollTop;\n            left.scrollLeft = right.scrollLeft;\n        }\n    };\n    if (!left.onscroll) {\n        left.onscroll = onScroll;\n    }\n    if (!right.onscroll) {\n        right.onscroll = onScroll;\n    }\n    return () => {\n        left.onscroll = null;\n        right.onscroll = null;\n    };\n};\nconst getElementRoot = (element) => {\n    if (element) {\n        const root = element.getRootNode();\n        if (root instanceof ShadowRoot) {\n            return root;\n        }\n        return element.ownerDocument;\n    }\n    return document;\n};\nconst getDiffIdFromElement = (element) => {\n    var _a, _b;\n    if (element) {\n        if (typeof element.closest === \"function\") {\n            const diffRoot = element.closest('[data-component=\"git-diff-view\"]');\n            const ele = (_a = diffRoot === null || diffRoot === void 0 ? void 0 : diffRoot.querySelector) === null || _a === void 0 ? void 0 : _a.call(diffRoot, \".diff-view-wrapper\");\n            return (_b = ele === null || ele === void 0 ? void 0 : ele.getAttribute) === null || _b === void 0 ? void 0 : _b.call(ele, \"id\");\n        }\n        else {\n            let el = element;\n            while (el) {\n                if (el.getAttribute && el.getAttribute(\"data-component\") === \"git-diff-view\") {\n                    const ele = el.querySelector(\".diff-view-wrapper\");\n                    return ele.getAttribute(\"id\");\n                }\n                el = el.parentElement;\n            }\n        }\n    }\n};\n\nconst diffFontSizeName = \"--diff-font-size--\";\nconst diffAsideWidthName = \"--diff-aside-width--\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nconst memoFunc = (func) => {\n    const cache = {};\n    return ((key) => {\n        if (cache[key]) {\n            return cache[key];\n        }\n        const result = func(key);\n        cache[key] = result;\n        return result;\n    });\n};\n\nvar NewLineSymbol;\n(function (NewLineSymbol) {\n    NewLineSymbol[NewLineSymbol[\"CRLF\"] = 1] = \"CRLF\";\n    NewLineSymbol[NewLineSymbol[\"CR\"] = 2] = \"CR\";\n    NewLineSymbol[NewLineSymbol[\"LF\"] = 3] = \"LF\";\n    NewLineSymbol[NewLineSymbol[\"NEWLINE\"] = 4] = \"NEWLINE\";\n    NewLineSymbol[NewLineSymbol[\"NORMAL\"] = 5] = \"NORMAL\";\n    NewLineSymbol[NewLineSymbol[\"NULL\"] = 6] = \"NULL\";\n})(NewLineSymbol || (NewLineSymbol = {}));\nconst getSymbol = (symbol) => {\n    switch (symbol) {\n        case NewLineSymbol.LF:\n            return \"␊\";\n        case NewLineSymbol.CR:\n            return \"␍\";\n        case NewLineSymbol.CRLF:\n            return \"␍␊\";\n        default:\n            return \"\";\n    }\n};\nvar DiffModeEnum;\n(function (DiffModeEnum) {\n    // github like\n    DiffModeEnum[DiffModeEnum[\"SplitGitHub\"] = 1] = \"SplitGitHub\";\n    // gitlab like\n    DiffModeEnum[DiffModeEnum[\"SplitGitLab\"] = 2] = \"SplitGitLab\";\n    DiffModeEnum[DiffModeEnum[\"Split\"] = 3] = \"Split\";\n    DiffModeEnum[DiffModeEnum[\"Unified\"] = 4] = \"Unified\";\n})(DiffModeEnum || (DiffModeEnum = {}));\n\nconst processAST = (ast) => {\n    let lineNumber = 1;\n    const syntaxObj = {};\n    const loopAST = (nodes, wrapper) => {\n        nodes.forEach((node) => {\n            if (node.type === \"text\") {\n                if (node.value.indexOf(\"\\n\") === -1) {\n                    const valueLength = node.value.length;\n                    if (!syntaxObj[lineNumber]) {\n                        node.startIndex = 0;\n                        node.endIndex = valueLength - 1;\n                        const item = {\n                            value: node.value,\n                            lineNumber,\n                            valueLength,\n                            nodeList: [{ node, wrapper }],\n                        };\n                        syntaxObj[lineNumber] = item;\n                    }\n                    else {\n                        node.startIndex = syntaxObj[lineNumber].valueLength;\n                        node.endIndex = node.startIndex + valueLength - 1;\n                        syntaxObj[lineNumber].value += node.value;\n                        syntaxObj[lineNumber].valueLength += valueLength;\n                        syntaxObj[lineNumber].nodeList.push({ node, wrapper });\n                    }\n                    node.lineNumber = lineNumber;\n                    return;\n                }\n                const lines = node.value.split(\"\\n\");\n                node.children = node.children || [];\n                for (let i = 0; i < lines.length; i++) {\n                    const _value = i === lines.length - 1 ? lines[i] : lines[i] + \"\\n\";\n                    const _lineNumber = i === 0 ? lineNumber : ++lineNumber;\n                    const _valueLength = _value.length;\n                    const _node = {\n                        type: \"text\",\n                        value: _value,\n                        startIndex: Infinity,\n                        endIndex: Infinity,\n                        lineNumber: _lineNumber,\n                    };\n                    if (!syntaxObj[_lineNumber]) {\n                        _node.startIndex = 0;\n                        _node.endIndex = _valueLength - 1;\n                        const item = {\n                            value: _value,\n                            lineNumber: _lineNumber,\n                            valueLength: _valueLength,\n                            nodeList: [{ node: _node, wrapper }],\n                        };\n                        syntaxObj[_lineNumber] = item;\n                    }\n                    else {\n                        _node.startIndex = syntaxObj[_lineNumber].valueLength;\n                        _node.endIndex = _node.startIndex + _valueLength - 1;\n                        syntaxObj[_lineNumber].value += _value;\n                        syntaxObj[_lineNumber].valueLength += _valueLength;\n                        syntaxObj[_lineNumber].nodeList.push({ node: _node, wrapper });\n                    }\n                    node.children.push(_node);\n                }\n                node.lineNumber = lineNumber;\n                return;\n            }\n            if (node.children) {\n                loopAST(node.children, node);\n                node.lineNumber = lineNumber;\n            }\n        });\n    };\n    loopAST(ast.children);\n    return { syntaxFileObject: syntaxObj, syntaxFileLineNumber: lineNumber };\n};\n\nexport { DiffModeEnum, NewLineSymbol, addContentBGName, addContentHighlightBGName, addLineNumberBGName, addWidgetBGName, addWidgetColorName, borderColorName, delContentBGName, delContentHighlightBGName, delLineNumberBGName, diffAsideWidthName, diffFontSizeName, emptyBGName, expandContentBGName, expandLineNumberBGName, expandLineNumberColorName, getContentBG, getDiffIdFromElement, getElementRoot, getLineNumberBG, getSymbol, getTextMeasureInstance, hunkContentBGName, hunkContentColorName, hunkLineNumberBGHoverName, hunkLineNumberBGName, memoFunc, plainContentBGName, plainLineNumberBGName, plainLineNumberColorName, processAST, removeAllSelection, syncScroll };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJvbGx1cCtwbHVnaW4tdHlwZXNjcmlwdEAxMi4xLjRfcm9sbHVwQDQuNTIuNF90c2xpYkAyLjguMV90eXBlc2NyaXB0QDUuOS4zL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi8uLi9zcmMvdGV4dE1lYXN1cmUudHMiLCIuLi8uLi9zcmMvY29sb3IudHMiLCIuLi8uLi9zcmMvZG9tLnRzIiwiLi4vLi4vc3JjL3NpemUudHMiLCIuLi8uLi9zcmMvdXRpbHMudHMiLCIuLi8uLi9zcmMvc3ltYm9sLnRzIiwiLi4vLi4vc3JjL2hpZ2hsaWdodEFTVC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sLCBJdGVyYXRvciAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19lc0RlY29yYXRlKGN0b3IsIGRlc2NyaXB0b3JJbiwgZGVjb3JhdG9ycywgY29udGV4dEluLCBpbml0aWFsaXplcnMsIGV4dHJhSW5pdGlhbGl6ZXJzKSB7XHJcbiAgICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cclxuICAgIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XHJcbiAgICB2YXIgdGFyZ2V0ID0gIWRlc2NyaXB0b3JJbiAmJiBjdG9yID8gY29udGV4dEluW1wic3RhdGljXCJdID8gY3RvciA6IGN0b3IucHJvdG90eXBlIDogbnVsbDtcclxuICAgIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xyXG4gICAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbi5hY2Nlc3MpIGNvbnRleHQuYWNjZXNzW3BdID0gY29udGV4dEluLmFjY2Vzc1twXTtcclxuICAgICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChraW5kID09PSBcImFjY2Vzc29yXCIpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuZ2V0KSkgZGVzY3JpcHRvci5nZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgICAgIGVsc2UgZGVzY3JpcHRvcltrZXldID0gXztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSwgZGVzY3JpcHRvcik7XHJcbiAgICBkb25lID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XHJcbiAgICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZVZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wcm9wS2V5KHgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcclxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogcHJlZml4ID8gXCJcIi5jb25jYXQocHJlZml4LCBcIiBcIiwgbmFtZSkgOiBuYW1lIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XHJcbiAgICByZXR1cm4gZy5uZXh0ID0gdmVyYigwKSwgZ1tcInRocm93XCJdID0gdmVyYigxKSwgZ1tcInJldHVyblwiXSA9IHZlcmIoMiksIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEFzeW5jSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEFzeW5jSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSksIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiwgYXdhaXRSZXR1cm4pLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiBhd2FpdFJldHVybihmKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZiwgcmVqZWN0KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxudmFyIG93bktleXMgPSBmdW5jdGlvbihvKSB7XHJcbiAgICBvd25LZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICB2YXIgYXIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG8pIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgaykpIGFyW2FyLmxlbmd0aF0gPSBrO1xyXG4gICAgICAgIHJldHVybiBhcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gb3duS2V5cyhvKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrID0gb3duS2V5cyhtb2QpLCBpID0gMDsgaSA8IGsubGVuZ3RoOyBpKyspIGlmIChrW2ldICE9PSBcImRlZmF1bHRcIikgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrW2ldKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudiwgdmFsdWUsIGFzeW5jKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xyXG4gICAgICAgIHZhciBkaXNwb3NlLCBpbm5lcjtcclxuICAgICAgICBpZiAoYXN5bmMpIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNEaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jRGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmRpc3Bvc2VdO1xyXG4gICAgICAgICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xyXG4gICAgICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhc3luYykge1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcblxyXG59XHJcblxyXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGlzcG9zZVJlc291cmNlcyhlbnYpIHtcclxuICAgIGZ1bmN0aW9uIGZhaWwoZSkge1xyXG4gICAgICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcclxuICAgICAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFyIHIsIHMgPSAwO1xyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgICB3aGlsZSAociA9IGVudi5zdGFjay5wb3AoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyLmFzeW5jICYmIHMgPT09IDEpIHJldHVybiBzID0gMCwgZW52LnN0YWNrLnB1c2gociksIFByb21pc2UucmVzb2x2ZSgpLnRoZW4obmV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoci5kaXNwb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHMgfD0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZmFpbChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV4dCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24ocGF0aCwgcHJlc2VydmVKc3gpIHtcclxuICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC4odHN4KSR8KCg/OlxcLmQpPykoKD86XFwuW14uL10rPyk/KVxcLihbY21dPyl0cyQvaSwgZnVuY3Rpb24gKG0sIHRzeCwgZCwgZXh0LCBjbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHN4ID8gcHJlc2VydmVKc3ggPyBcIi5qc3hcIiA6IFwiLmpzXCIgOiBkICYmICghZXh0IHx8ICFjbSkgPyBtIDogKGQgKyBleHQgKyBcIi5cIiArIGNtLnRvTG93ZXJDYXNlKCkgKyBcImpzXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhdGg7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIF9fZXh0ZW5kczogX19leHRlbmRzLFxyXG4gICAgX19hc3NpZ246IF9fYXNzaWduLFxyXG4gICAgX19yZXN0OiBfX3Jlc3QsXHJcbiAgICBfX2RlY29yYXRlOiBfX2RlY29yYXRlLFxyXG4gICAgX19wYXJhbTogX19wYXJhbSxcclxuICAgIF9fZXNEZWNvcmF0ZTogX19lc0RlY29yYXRlLFxyXG4gICAgX19ydW5Jbml0aWFsaXplcnM6IF9fcnVuSW5pdGlhbGl6ZXJzLFxyXG4gICAgX19wcm9wS2V5OiBfX3Byb3BLZXksXHJcbiAgICBfX3NldEZ1bmN0aW9uTmFtZTogX19zZXRGdW5jdGlvbk5hbWUsXHJcbiAgICBfX21ldGFkYXRhOiBfX21ldGFkYXRhLFxyXG4gICAgX19hd2FpdGVyOiBfX2F3YWl0ZXIsXHJcbiAgICBfX2dlbmVyYXRvcjogX19nZW5lcmF0b3IsXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmc6IF9fY3JlYXRlQmluZGluZyxcclxuICAgIF9fZXhwb3J0U3RhcjogX19leHBvcnRTdGFyLFxyXG4gICAgX192YWx1ZXM6IF9fdmFsdWVzLFxyXG4gICAgX19yZWFkOiBfX3JlYWQsXHJcbiAgICBfX3NwcmVhZDogX19zcHJlYWQsXHJcbiAgICBfX3NwcmVhZEFycmF5czogX19zcHJlYWRBcnJheXMsXHJcbiAgICBfX3NwcmVhZEFycmF5OiBfX3NwcmVhZEFycmF5LFxyXG4gICAgX19hd2FpdDogX19hd2FpdCxcclxuICAgIF9fYXN5bmNHZW5lcmF0b3I6IF9fYXN5bmNHZW5lcmF0b3IsXHJcbiAgICBfX2FzeW5jRGVsZWdhdG9yOiBfX2FzeW5jRGVsZWdhdG9yLFxyXG4gICAgX19hc3luY1ZhbHVlczogX19hc3luY1ZhbHVlcyxcclxuICAgIF9fbWFrZVRlbXBsYXRlT2JqZWN0OiBfX21ha2VUZW1wbGF0ZU9iamVjdCxcclxuICAgIF9faW1wb3J0U3RhcjogX19pbXBvcnRTdGFyLFxyXG4gICAgX19pbXBvcnREZWZhdWx0OiBfX2ltcG9ydERlZmF1bHQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldDogX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRJbjogX19jbGFzc1ByaXZhdGVGaWVsZEluLFxyXG4gICAgX19hZGREaXNwb3NhYmxlUmVzb3VyY2U6IF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxyXG4gICAgX19kaXNwb3NlUmVzb3VyY2VzOiBfX2Rpc3Bvc2VSZXNvdXJjZXMsXHJcbiAgICBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbjogX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24sXHJcbn07XHJcbiIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0FBQyxXQUFXLENBQUMsRUFBRTtBQUMzQix3QkFBQSxLQUFLLENBQUMsVUFBVSxHQUFHLENBQUM7QUFDcEIsd0JBQUEsS0FBSyxDQUFDLFFBQVEsR0FBRyxZQUFZLEdBQUcsQ0FBQztBQUNqQyx3QkFBQSxNQUFNLElBQUksR0FBRztBQUNYLDRCQUFBLEtBQUssRUFBRSxNQUFNO0FBQ2IsNEJBQUEsVUFBVSxFQUFFLFdBQVc7QUFDdkIsNEJBQUEsV0FBVyxFQUFFLFlBQVk7NEJBQ3pCLFFBQVEsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQzt5QkFDckM7QUFDRCx3QkFBQSxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSTtvQkFDL0I7eUJBQU87d0JBQ0wsS0FBSyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVzt3QkFDckQsS0FBSyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsVUFBVSxHQUFHLFlBQVksR0FBRyxDQUFDO0FBQ3BELHdCQUFBLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLElBQUksTUFBTTtBQUN0Qyx3QkFBQSxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxJQUFJLFlBQVk7QUFDbEQsd0JBQUEsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDO29CQUNoRTtBQUNBLG9CQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFDM0I7QUFFQSxnQkFBQSxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVU7Z0JBRTVCO1lBQ0Y7QUFDQSxZQUFBLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUNqQixnQkFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7QUFFNUIsZ0JBQUEsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVO1lBQzlCO0FBQ0YsUUFBQSxDQUFDLENBQUM7QUFDSixJQUFBLENBQUM7QUFFRCxJQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBd0IsQ0FBQztJQUVyQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsU0FBUyxFQUFFLG9CQUFvQixFQUFFLFVBQVUsRUFBRTtBQUMxRTs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19\n", "import type { DiffModeEnum, SplitSide } from \"..\";\nimport type { DiffFile } from \"@git-diff-view/core\";\nimport type { InjectionKey, Ref, Slot } from \"vue\";\n\nexport const idSymbol: InjectionKey<Ref<string>> = Symbol();\n\nexport const domSymbol: InjectionKey<Ref<HTMLElement>> = Symbol();\n\nexport const mountedSymbol: InjectionKey<Ref<boolean>> = Symbol();\n\nexport const modeSymbol: InjectionKey<Ref<DiffModeEnum>> = Symbol();\n\nexport const fontSizeSymbol: InjectionKey<Ref<number>> = Symbol();\n\nexport const enableWrapSymbol: InjectionKey<Ref<boolean>> = Symbol();\n\nexport const enableHighlightSymbol: InjectionKey<Ref<boolean>> = Symbol();\n\nexport const enableAddWidgetSymbol: InjectionKey<Ref<boolean>> = Symbol();\n\nexport const slotsSymbol: InjectionKey<{\n  widget: Slot<{ lineNumber: number; side: SplitSide; diffFile: DiffFile; onClose: () => void }>;\n  extend: Slot<{ lineNumber: number; side: SplitSide; data: any; diffFile: DiffFile; onUpdate: () => void }>;\n}> = Symbol();\n\nexport const extendDataSymbol: InjectionKey<\n  Ref<{ oldFile?: Record<string, { data: any }>; newFile?: Record<string, { data: any }> }>\n> = Symbol();\n\nexport const onAddWidgetClickSymbol: InjectionKey<\n  (event: \"onAddWidgetClick\", lineNumber: number, side: SplitSide) => void\n> = Symbol();\n\nexport const widgetStateSymbol: InjectionKey<Ref<{ lineNumber?: number; side?: SplitSide }>> = Symbol();\n\nexport const setWidgetStateSymbol: InjectionKey<(props: { lineNumber?: number; side?: SplitSide }) => void> = Symbol();\n", "import { inject } from \"vue\";\n\nimport {\n  domSymbol,\n  enableAddWidgetSymbol,\n  enableHighlightSymbol,\n  enableWrapSymbol,\n  extendDataSymbol,\n  fontSizeSymbol,\n  idSymbol,\n  modeSymbol,\n  mountedSymbol,\n  onAddWidgetClickSymbol,\n  setWidgetStateSymbol,\n  slotsSymbol,\n  widgetStateSymbol,\n} from \"./provider\";\n\nexport const useId = () => inject(idSymbol);\n\nexport const useDom = () => inject(domSymbol);\n\nexport const useMode = () => inject(modeSymbol);\n\nexport const useIsMounted = () => inject(mountedSymbol);\n\nexport const useFontSize = () => inject(fontSizeSymbol);\n\nexport const useEnableWrap = () => inject(enableWrapSymbol);\n\nexport const useEnableHighlight = () => inject(enableHighlightSymbol);\n\nexport const useEnableAddWidget = () => inject(enableAddWidgetSymbol);\n\nexport const useExtendData = () => inject(extendDataSymbol);\n\nexport const useOnAddWidgetClick = () => inject(onAddWidgetClickSymbol);\n\nexport const useSlots = () => inject(slotsSymbol);\n\nexport const useWidget = () => inject(widgetStateSymbol);\n\nexport const useSetWidget = () => inject(setWidgetStateSymbol);\n", "import { onMounted, ref } from \"vue\";\n\nexport const useIsMounted = () => {\n  const isMount = ref(false);\n\n  onMounted(() => {\n    isMount.value = true;\n  });\n\n  return isMount;\n};\n", "import { provide, ref, watch } from \"vue\";\n\nimport type { InjectionKey } from \"vue\";\n\nexport const useProvide = <T extends Record<string, any>, K extends keyof T = keyof T>(\n  props: T,\n  key: K,\n  keySymbol: InjectionKey<any>,\n  option?: { defaultValue?: T[K]; deepWatch?: boolean }\n) => {\n  const value = ref(props?.[key] || option?.defaultValue);\n\n  watch(\n    () => props?.[key],\n    () => {\n      value.value = props[key];\n    },\n    { deep: option?.deepWatch }\n  );\n\n  provide(keySymbol, value);\n};\n", "import { watchEffect } from \"vue\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const useSubscribeDiffFile = (props: { diffFile: DiffFile }, onUpdate: (instance: DiffFile) => void) => {\n  const initSubscribe = (onClean: (cb: () => void) => void) => {\n    const diffFile = props.diffFile;\n\n    onUpdate(diffFile);\n\n    const clean = diffFile.subscribe(() => onUpdate(diffFile));\n\n    onClean(clean);\n  };\n\n  watchEffect(initSubscribe);\n};\n", "import { getTextMeasureInstance } from \"@git-diff-view/utils\";\nimport { ref, watchPostEffect } from \"vue\";\n\nimport { useIsMounted } from \"./useIsMounted\";\n\nimport type { Ref } from \"vue\";\n\nexport const useTextWidth = ({\n  text,\n  font,\n}: {\n  text: Ref<string>;\n  font: Ref<{ fontFamily?: string; fontStyle?: string; fontSize?: string }>;\n}) => {\n  const isMounted = useIsMounted();\n\n  const fontSize = parseInt(font.value.fontSize);\n\n  let baseSize = 6;\n\n  baseSize += fontSize > 10 ? (fontSize - 10) * 0.6 : 0;\n\n  const width = ref(baseSize * text.value.length);\n\n  const measureText = () => {\n    if (!isMounted.value) return;\n    width.value = getTextMeasureInstance().measure(text.value || \"\", font.value);\n  };\n\n  watchPostEffect(measureText);\n\n  return width;\n};\n", "import { addWidgetBGName, addWidgetColorName, diffFontSizeName } from \"@git-diff-view/utils\";\n\nimport { type SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitAddWidget = ({\n  side,\n  className,\n  lineNumber,\n  onWidgetClick,\n  onOpenAddWidget,\n}: {\n  index: number;\n  className?: string;\n  lineNumber: number;\n  diffFile: DiffFile;\n  side: SplitSide;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n  onWidgetClick?: (event: \"onAddWidgetClick\", lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <div\n      class={\n        \"diff-add-widget-wrapper invisible select-none transition-transform hover:scale-110 group-hover:visible\" +\n        (className ? \" \" + className : \"\")\n      }\n      style={{\n        width: `calc(var(${diffFontSizeName}) * 1.4)`,\n        height: `calc(var(${diffFontSizeName}) * 1.4)`,\n        top: `calc(var(${diffFontSizeName}) * 0.1)`,\n      }}\n    >\n      <button\n        class=\"diff-add-widget z-[1] flex h-full w-full origin-center cursor-pointer items-center justify-center rounded-md text-[1.2em]\"\n        style={{\n          color: `var(${addWidgetColorName})`,\n          backgroundColor: `var(${addWidgetBGName})`,\n        }}\n        onClick={() => {\n          onOpenAddWidget(lineNumber, side);\n          onWidgetClick?.(\"onAddWidgetClick\", lineNumber, side);\n        }}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n\nexport const DiffUnifiedAddWidget = ({\n  lineNumber,\n  side,\n  onWidgetClick,\n  onOpenAddWidget,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  side: SplitSide;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n  onWidgetClick?: (event: \"onAddWidgetClick\", lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <div\n      class=\"diff-add-widget-wrapper invisible absolute left-[100%] translate-x-[-50%] select-none transition-transform hover:scale-110 group-hover:visible\"\n      style={{\n        width: `calc(var(${diffFontSizeName}) * 1.4)`,\n        height: `calc(var(${diffFontSizeName}) * 1.4)`,\n        top: `calc(var(${diffFontSizeName}) * 0.1)`,\n      }}\n    >\n      <button\n        class=\"diff-add-widget z-[1] flex h-full w-full origin-center cursor-pointer items-center justify-center rounded-md text-[1.2em]\"\n        style={{\n          color: `var(${addWidgetColorName})`,\n          backgroundColor: `var(${addWidgetBGName})`,\n        }}\n        onClick={() => {\n          onOpenAddWidget(lineNumber, side);\n          onWidgetClick?.(\"onAddWidgetClick\", lineNumber, side);\n        }}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n", "export const DiffNoNewLine = () => {\n  return (\n    <svg aria-label=\"No newline at end of file\" role=\"img\" viewBox=\"0 0 16 16\" version=\"1.1\" fill=\"currentColor\">\n      <path d=\"M4.25 7.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z\"></path>\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z\"></path>\n    </svg>\n  );\n};\n", "import {\n  DiffLineType,\n  getPlainDiffTemplate,\n  getPlainLineTemplate,\n  getSyntaxDiffTemplate,\n  getSyntaxLineTemplate,\n} from \"@git-diff-view/core\";\nimport {\n  addContentHighlightBGName,\n  delContentHighlightBGName,\n  diffFontSizeName,\n  getSymbol,\n  NewLineSymbol,\n} from \"@git-diff-view/utils\";\n\nimport { DiffNoNewLine } from \"./DiffNoNewLine\";\n\nimport type { DiffFile, DiffLine, File } from \"@git-diff-view/core\";\n\nconst DiffString = ({\n  rawLine,\n  diffLine,\n  operator,\n  plainLine,\n  enableWrap,\n  enableTemplate,\n}: {\n  rawLine: string;\n  diffLine?: DiffLine;\n  plainLine?: File[\"plainFile\"][number];\n  operator?: \"add\" | \"del\";\n  enableWrap?: boolean;\n  enableTemplate?: boolean;\n}) => {\n  const changes = diffLine?.changes;\n\n  if (changes?.hasLineChange) {\n    const isNewLineSymbolChanged = changes.newLineSymbol;\n\n    if (enableTemplate && !diffLine?.plainTemplate && typeof getPlainDiffTemplate === \"function\") {\n      getPlainDiffTemplate({ diffLine, rawLine, operator });\n    }\n\n    if (enableTemplate && diffLine?.plainTemplate) {\n      return (\n        <span class=\"diff-line-content-raw\">\n          <span data-template innerHTML={diffLine.plainTemplate} />\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              class={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    } else {\n      // TODO remove\n      const range = changes.range;\n      const str1 = rawLine.slice(0, range.location);\n      const str2 = rawLine.slice(range.location, range.location + range.length);\n      const str3 = rawLine.slice(range.location + range.length);\n      const isLast = str2.includes(\"\\n\");\n      const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n      return (\n        <span class=\"diff-line-content-raw\">\n          <span data-range-start={range.location} data-range-end={range.location + range.length}>\n            {str1}\n            <span\n              data-diff-highlight\n              class=\"rounded-[0.2em]\"\n              style={{\n                backgroundColor:\n                  operator === \"add\" ? `var(${addContentHighlightBGName})` : `var(${delContentHighlightBGName})`,\n              }}\n            >\n              {isLast ? (\n                <>\n                  {_str2}\n                  <span data-newline-symbol>{getSymbol(isNewLineSymbolChanged)}</span>\n                </>\n              ) : (\n                str2\n              )}\n            </span>\n            {str3}\n          </span>\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              class={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    }\n  }\n\n  if (enableTemplate && plainLine && !plainLine?.template) {\n    plainLine.template = getPlainLineTemplate(plainLine.value);\n  }\n\n  if (enableTemplate && plainLine?.template) {\n    return (\n      <span class=\"diff-line-content-raw\">\n        <span data-template innerHTML={plainLine.template} />\n      </span>\n    );\n  }\n\n  return <span class=\"diff-line-content-raw\">{rawLine}</span>;\n};\n\nconst DiffSyntax = ({\n  rawLine,\n  diffLine,\n  operator,\n  syntaxLine,\n  enableWrap,\n  enableTemplate,\n}: {\n  rawLine: string;\n  diffLine?: DiffLine;\n  syntaxLine?: File[\"syntaxFile\"][number];\n  operator?: \"add\" | \"del\";\n  enableWrap?: boolean;\n  enableTemplate?: boolean;\n}) => {\n  if (!syntaxLine) {\n    return (\n      <DiffString\n        rawLine={rawLine}\n        diffLine={diffLine}\n        operator={operator}\n        enableWrap={enableWrap}\n        enableTemplate={enableTemplate}\n      />\n    );\n  }\n\n  const changes = diffLine?.changes;\n\n  if (changes?.hasLineChange) {\n    const isNewLineSymbolChanged = changes.newLineSymbol;\n\n    if (enableTemplate && !diffLine?.syntaxTemplate && typeof getSyntaxDiffTemplate === \"function\") {\n      getSyntaxDiffTemplate({ diffLine, syntaxLine, operator });\n    }\n\n    if (enableTemplate && diffLine?.syntaxTemplate) {\n      return (\n        <span class=\"diff-line-syntax-raw\">\n          <span data-template innerHTML={diffLine.syntaxTemplate} />\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              class={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    } else {\n      // TODO remove\n      const range = changes.range;\n\n      return (\n        <span class=\"diff-line-syntax-raw\">\n          <span data-range-start={range.location} data-range-end={range.location + range.length}>\n            {syntaxLine.nodeList?.map(({ node, wrapper }, index) => {\n              if (node.endIndex < range.location || range.location + range.length < node.startIndex) {\n                return (\n                  <span\n                    key={index}\n                    data-start={node.startIndex}\n                    data-end={node.endIndex}\n                    class={wrapper?.properties?.className?.join(\" \")}\n                    style={wrapper?.properties?.style}\n                  >\n                    {node.value}\n                  </span>\n                );\n              } else {\n                const index1 = range.location - node.startIndex;\n                const index2 = index1 < 0 ? 0 : index1;\n                const str1 = node.value.slice(0, index2);\n                const str2 = node.value.slice(index2, index1 + range.length);\n                const str3 = node.value.slice(index1 + range.length);\n                const isStart = str1.length || range.location === node.startIndex;\n                const isEnd = str3.length || node.endIndex === range.location + range.length - 1;\n                const isLast = str2.includes(\"\\n\");\n                const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n                return (\n                  <span\n                    key={index}\n                    data-start={node.startIndex}\n                    data-end={node.endIndex}\n                    class={wrapper?.properties?.className?.join(\" \")}\n                    style={wrapper?.properties?.style}\n                  >\n                    {str1}\n                    <span\n                      data-diff-highlight\n                      style={{\n                        backgroundColor:\n                          operator === \"add\"\n                            ? `var(${addContentHighlightBGName})`\n                            : `var(${delContentHighlightBGName})`,\n                        borderTopLeftRadius: isStart ? \"0.2em\" : undefined,\n                        borderBottomLeftRadius: isStart ? \"0.2em\" : undefined,\n                        borderTopRightRadius: isEnd || isLast ? \"0.2em\" : undefined,\n                        borderBottomRightRadius: isEnd || isLast ? \"0.2em\" : undefined,\n                      }}\n                    >\n                      {isLast ? (\n                        <>\n                          {_str2}\n                          <span data-newline-symbol>{getSymbol(isNewLineSymbolChanged)}</span>\n                        </>\n                      ) : (\n                        str2\n                      )}\n                    </span>\n                    {str3}\n                  </span>\n                );\n              }\n            })}\n          </span>\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              class={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    }\n  }\n\n  if (enableTemplate && !syntaxLine.template) {\n    syntaxLine.template = getSyntaxLineTemplate(syntaxLine);\n  }\n\n  if (enableTemplate && syntaxLine.template) {\n    return (\n      <span class=\"diff-line-syntax-raw\">\n        <span data-template innerHTML={syntaxLine.template} />\n      </span>\n    );\n  }\n\n  return (\n    <span class=\"diff-line-syntax-raw\">\n      {syntaxLine?.nodeList?.map(({ node, wrapper }, index) => (\n        <span\n          key={index}\n          data-start={node.startIndex}\n          data-end={node.endIndex}\n          class={wrapper?.properties?.className?.join(\" \")}\n          style={wrapper?.properties?.style}\n        >\n          {node.value}\n        </span>\n      ))}\n    </span>\n  );\n};\n\nexport const DiffContent = ({\n  diffLine,\n  rawLine,\n  diffFile,\n  plainLine,\n  syntaxLine,\n  enableWrap,\n  enableHighlight,\n}: {\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableHighlight: boolean;\n}) => {\n  const isAdded = diffLine?.type === DiffLineType.Add;\n\n  const isDelete = diffLine?.type === DiffLineType.Delete;\n\n  const isMaxLineLengthToIgnoreSyntax = syntaxLine?.nodeList?.length > 150;\n\n  const isEnableTemplate = diffFile?.getIsEnableTemplate?.() ?? true;\n\n  return (\n    <div\n      class=\"diff-line-content-item pl-[2.0em]\"\n      // data-val={rawLine}\n      style={{\n        whiteSpace: enableWrap ? \"pre-wrap\" : \"pre\",\n        wordBreak: enableWrap ? \"break-all\" : \"initial\",\n      }}\n    >\n      <span\n        data-operator={isAdded ? \"+\" : isDelete ? \"-\" : undefined}\n        class=\"diff-line-content-operator ml-[-1.5em] inline-block w-[1.5em] select-none indent-[0.2em]\"\n      >\n        {isAdded ? \"+\" : isDelete ? \"-\" : \" \"}\n      </span>\n      {enableHighlight && syntaxLine && !isMaxLineLengthToIgnoreSyntax ? (\n        <DiffSyntax\n          operator={isAdded ? \"add\" : isDelete ? \"del\" : undefined}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          syntaxLine={syntaxLine}\n          enableWrap={enableWrap}\n          enableTemplate={isEnableTemplate}\n        />\n      ) : (\n        <DiffString\n          operator={isAdded ? \"add\" : isDelete ? \"del\" : undefined}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          enableWrap={enableWrap}\n          enableTemplate={isEnableTemplate}\n        />\n      )}\n    </div>\n  );\n};\n", "import { DiffLineType, type DiffFile, checkDiffLineIncludeChange } from \"@git-diff-view/core\";\nimport {\n  getContentBG,\n  getLineNumberBG,\n  plainLineNumberColorName,\n  diffAsideWidthName,\n  emptyBGName,\n  expandLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { useEnableAddWidget, useEnableHighlight, useOnAddWidgetClick, useSetWidget } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\n\nimport { DiffSplitAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\nimport { SplitSide } from \"./DiffView\";\n\nexport const DiffSplitContentLine = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const setWidget = useSetWidget();\n\n    const enableAddWidget = useEnableAddWidget();\n\n    const enableHighlight = useEnableHighlight();\n\n    const onAddWidgetClick = useOnAddWidgetClick();\n\n    const currentLine = computed(() =>\n      props.side === SplitSide.old\n        ? props.diffFile.getSplitLeftLine(props.index)\n        : props.diffFile.getSplitRightLine(props.index)\n    );\n\n    const currentLineHasDiff = computed(() => !!currentLine.value?.diff);\n\n    const currentLineHasChange = computed(() => checkDiffLineIncludeChange(currentLine.value?.diff));\n\n    const currentLineHasHidden = computed(() => currentLine.value?.isHidden);\n\n    const currentLineHasContent = computed(() => currentLine.value?.lineNumber);\n\n    const currentSyntaxLine = ref(\n      props.side === SplitSide.old\n        ? props.diffFile.getOldSyntaxLine(currentLine.value?.lineNumber)\n        : props.diffFile.getNewSyntaxLine(currentLine.value?.lineNumber)\n    );\n\n    const currentPlainLine = ref(\n      props.side === SplitSide.old\n        ? props.diffFile.getOldPlainLine(currentLine.value?.lineNumber)\n        : props.diffFile.getNewPlainLine(currentLine.value?.lineNumber)\n    );\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      currentSyntaxLine.value =\n        props.side === SplitSide.old\n          ? diffFile.getOldSyntaxLine(currentLine.value?.lineNumber)\n          : diffFile.getNewSyntaxLine(currentLine.value?.lineNumber);\n\n      currentPlainLine.value =\n        props.side === SplitSide.old\n          ? diffFile.getOldPlainLine(currentLine.value?.lineNumber)\n          : diffFile.getNewPlainLine(currentLine.value?.lineNumber);\n    });\n\n    const onOpenAddWidget = (lineNumber: number, side: SplitSide) => setWidget({ side: side, lineNumber: lineNumber });\n\n    return () => {\n      if (currentLineHasHidden.value) return null;\n\n      const isAdded = currentLine.value?.diff?.type === DiffLineType.Add;\n\n      const isDelete = currentLine.value?.diff?.type === DiffLineType.Delete;\n\n      const contentBG = getContentBG(isAdded, isDelete, currentLineHasDiff.value);\n\n      const lineNumberBG = getLineNumberBG(isAdded, isDelete, currentLineHasDiff.value);\n\n      return (\n        <tr\n          data-line={props.lineNumber}\n          data-state={currentLineHasDiff.value || !currentLineHasContent.value ? \"diff\" : \"plain\"}\n          data-side={SplitSide[props.side]}\n          class={\"diff-line\" + (currentLineHasContent.value ? \" group\" : \"\")}\n        >\n          {currentLineHasContent.value ? (\n            <>\n              <td\n                class={`diff-line-${SplitSide[props.side]}-num sticky left-0 z-[1] w-[1%] min-w-[40px] select-none pl-[10px] pr-[10px] text-right align-top`}\n                style={{\n                  backgroundColor: lineNumberBG,\n                  color: `var(${currentLineHasDiff.value ? plainLineNumberColorName : expandLineNumberColorName})`,\n                  width: `var(${diffAsideWidthName})`,\n                  minWidth: `var(${diffAsideWidthName})`,\n                  maxWidth: `var(${diffAsideWidthName})`,\n                }}\n              >\n                {currentLineHasDiff.value && enableAddWidget.value && (\n                  <DiffSplitAddWidget\n                    index={props.index}\n                    lineNumber={currentLine.value.lineNumber}\n                    side={props.side}\n                    diffFile={props.diffFile}\n                    onWidgetClick={onAddWidgetClick}\n                    className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                    onOpenAddWidget={onOpenAddWidget}\n                  />\n                )}\n                <span\n                  data-line-num={currentLine.value.lineNumber}\n                  style={{ opacity: currentLineHasChange.value ? undefined : 0.5 }}\n                >\n                  {currentLine.value.lineNumber}\n                </span>\n              </td>\n              <td\n                class={`diff-line-${SplitSide[props.side]}-content pr-[10px] align-top`}\n                style={{ backgroundColor: contentBG }}\n              >\n                <DiffContent\n                  enableWrap={false}\n                  diffFile={props.diffFile}\n                  rawLine={currentLine.value?.value || \"\"}\n                  diffLine={currentLine.value?.diff}\n                  plainLine={currentPlainLine.value}\n                  syntaxLine={currentSyntaxLine.value}\n                  enableHighlight={enableHighlight.value}\n                />\n              </td>\n            </>\n          ) : (\n            <td\n              class={`diff-line-${SplitSide[props.side]}-placeholder select-none`}\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            >\n              <span>&ensp;</span>\n            </td>\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitContentLine\", props: [\"diffFile\", \"index\", \"lineNumber\", \"side\"] }\n);\n", "import { getElementRoot } from \"@git-diff-view/utils\";\nimport { ref, watchPostEffect } from \"vue\";\n\nimport { useDom, useId, useIsMounted } from \"../context\";\n\nimport type { Ref } from \"vue\";\n\nexport type ObserveElement = HTMLElement & {\n  __observeCallback: Set<() => void>;\n  __observeInstance: ResizeObserver;\n};\n\nexport const useDomWidth = ({ selector, enable }: { selector: Ref<string>; enable: Ref<boolean> }) => {\n  const id = useId();\n\n  const dom = useDom();\n\n  const mounted = useIsMounted();\n\n  const width = ref(0);\n\n  const observeWidth = (onCancel: (cb: () => void) => void) => {\n    if (!mounted.value) return;\n\n    if (enable.value) {\n      const rootDocument = getElementRoot(dom.value);\n\n      const container = rootDocument.querySelector(`#diff-root${id.value}`);\n\n      const wrapper = container?.querySelector(selector.value);\n\n      if (!wrapper) return;\n\n      const typedWrapper = wrapper as ObserveElement;\n\n      const cb = () => {\n        const rect = wrapper?.getBoundingClientRect();\n        width.value = rect?.width ?? 0;\n      };\n\n      cb();\n\n      const cleanCb = () => {\n        typedWrapper.__observeCallback.delete(cb);\n        if (typedWrapper.__observeCallback.size === 0) {\n          typedWrapper.__observeInstance?.disconnect();\n          typedWrapper.removeAttribute(\"data-observe\");\n          delete typedWrapper.__observeCallback;\n          delete typedWrapper.__observeInstance;\n        }\n      };\n\n      if (typedWrapper.__observeCallback) {\n        typedWrapper.__observeCallback.add(cb);\n\n        onCancel(() => cleanCb());\n\n        return;\n      }\n\n      typedWrapper.__observeCallback = new Set();\n\n      typedWrapper.__observeCallback.add(cb);\n\n      const observer = new ResizeObserver(() => typedWrapper.__observeCallback.forEach((cb) => cb()));\n\n      typedWrapper.__observeInstance = observer;\n\n      observer.observe(typedWrapper);\n\n      typedWrapper.setAttribute(\"data-observe\", \"height\");\n\n      onCancel(() => cleanCb());\n    }\n  };\n\n  watchPostEffect((onCancel) => observeWidth(onCancel));\n\n  return width;\n};\n", "import { getElementRoot } from \"@git-diff-view/utils\";\nimport { type Ref, watchPostEffect } from \"vue\";\n\nimport { useDom, useId, useIsMounted } from \"../context\";\n\nimport type { ObserveElement } from \"./useDomWidth\";\n\n// TODO\nexport const useSyncHeight = ({\n  selector,\n  wrapper,\n  side,\n  enable,\n}: {\n  selector: Ref<string>;\n  wrapper: Ref<string>;\n  side: Ref<string>;\n  enable: Ref<boolean>;\n}) => {\n  const id = useId();\n\n  const dom = useDom();\n\n  const isMounted = useIsMounted();\n\n  const observeHeight = (onCancel: (cb: () => void) => void) => {\n    if (!isMounted.value) return;\n\n    if (enable.value) {\n      let clean = () => {};\n\n      const rootDocument = getElementRoot(dom.value);\n\n      const container = rootDocument.querySelector(`#diff-root${id.value}`);\n\n      const elements = Array.from(container?.querySelectorAll(selector.value) || []);\n\n      const wrappers = wrapper.value ? Array.from(container?.querySelectorAll(wrapper?.value) || []) : elements;\n\n      if (elements.length === 2 && wrappers.length === 2) {\n        const ele1 = elements[0] as HTMLElement;\n        const ele2 = elements[1] as HTMLElement;\n\n        const wrapper1 = wrappers[0] as HTMLElement;\n        const wrapper2 = wrappers[1] as HTMLElement;\n\n        const target = ele1.getAttribute(\"data-side\") === side.value ? ele1 : ele2;\n\n        const typedTarget = target as ObserveElement;\n\n        const cb = () => {\n          ele1.style.height = \"auto\";\n          ele2.style.height = \"auto\";\n          const rect1 = ele1.getBoundingClientRect();\n          const rect2 = ele2.getBoundingClientRect();\n          const maxHeight = Math.max(rect1.height, rect2.height);\n          wrapper1.style.height = maxHeight + \"px\";\n          wrapper2.style.height = maxHeight + \"px\";\n          wrapper1.setAttribute(\"data-sync-height\", String(maxHeight));\n          wrapper2.setAttribute(\"data-sync-height\", String(maxHeight));\n        };\n\n        cb();\n\n        const cleanCb = () => {\n          typedTarget.__observeCallback.delete(cb);\n          if (typedTarget.__observeCallback.size === 0) {\n            typedTarget.__observeInstance?.disconnect();\n            target.removeAttribute(\"data-observe\");\n            delete typedTarget.__observeCallback;\n            delete typedTarget.__observeInstance;\n          }\n        };\n\n        if (typedTarget.__observeCallback) {\n          typedTarget.__observeCallback.add(cb);\n\n          clean = cleanCb;\n          return;\n        }\n\n        typedTarget.__observeCallback = new Set();\n\n        typedTarget.__observeCallback.add(cb);\n\n        const observer = new ResizeObserver(() => typedTarget.__observeCallback.forEach((cb) => cb()));\n\n        typedTarget.__observeInstance = observer;\n\n        observer.observe(target);\n\n        target.setAttribute(\"data-observe\", \"height\");\n\n        clean = cleanCb;\n      }\n\n      onCancel(() => clean());\n    }\n  };\n\n  watchPostEffect(observeHeight);\n};\n", "import { emptyBGName } from \"@git-diff-view/utils\";\nimport { computed, defineComponent } from \"vue\";\n\nimport { useExtendData, useSlots } from \"../context\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitExtendLine = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const extendData = useExtendData();\n\n    const slots = useSlots();\n\n    const lineSelector = computed(() => `div[data-line=\"${props.lineNumber}-extend-content\"]`);\n\n    const lineWrapperSelector = computed(() => `tr[data-line=\"${props.lineNumber}-extend\"]`);\n\n    const wrapperSelector = computed(() =>\n      props.side === SplitSide.old ? \".old-diff-table-wrapper\" : \".new-diff-table-wrapper\"\n    );\n\n    const oldLine = computed(() => props.diffFile.getSplitLeftLine(props.index));\n\n    const newLine = computed(() => props.diffFile.getSplitRightLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const oldLineExtend = computed(() => extendData.value?.oldFile?.[oldLine.value?.lineNumber]);\n\n    const newLineExtend = computed(() => extendData.value?.newFile?.[newLine.value.lineNumber]);\n\n    const currentItem = computed(() => (props.side === SplitSide.old ? oldLine.value : newLine.value));\n\n    const currentIsHidden = computed(() => currentItem.value.isHidden);\n\n    const currentExtend = computed(() => (props.side === SplitSide.old ? oldLineExtend.value : newLineExtend.value));\n\n    const currentLineNumber = computed(() =>\n      props.side === SplitSide.old ? oldLine.value.lineNumber : newLine.value.lineNumber\n    );\n\n    const currentIsShow = computed(() =>\n      Boolean(\n        (oldLineExtend.value || newLineExtend.value) && (!currentIsHidden.value || enableExpand.value) && slots.extend\n      )\n    );\n\n    const currentEnable = computed(\n      () => (props.side === SplitSide.old ? !!oldLineExtend.value : !!newLineExtend.value) && currentIsShow.value\n    );\n\n    const extendSide = computed(\n      () => SplitSide[currentExtend.value ? props.side : props.side === SplitSide.new ? SplitSide.old : SplitSide.new]\n    );\n\n    useSyncHeight({\n      selector: lineSelector,\n      wrapper: lineWrapperSelector,\n      side: extendSide,\n      enable: currentIsShow,\n    });\n\n    const width = useDomWidth({\n      selector: wrapperSelector,\n      enable: currentEnable,\n    });\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      return (\n        <tr\n          data-line={`${props.lineNumber}-extend`}\n          data-state=\"extend\"\n          data-side={SplitSide[props.side]}\n          class=\"diff-line diff-line-extend\"\n        >\n          {currentExtend.value ? (\n            <td class={`diff-line-extend-${SplitSide[props.side]}-content p-0`} colspan={2}>\n              <div\n                data-line={`${props.lineNumber}-extend-content`}\n                data-side={SplitSide[props.side]}\n                class=\"diff-line-extend-wrapper sticky left-0 z-[1]\"\n                style={{ width: width.value + \"px\" }}\n              >\n                {width.value > 0 &&\n                  slots.extend?.({\n                    diffFile: props.diffFile,\n                    side: props.side,\n                    lineNumber: currentLineNumber.value,\n                    data: currentExtend.value.data,\n                    onUpdate: props.diffFile.notifyAll,\n                  })}\n              </div>\n            </td>\n          ) : (\n            <td\n              class={`diff-line-extend-${SplitSide[props.side]}-placeholder select-none p-0`}\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            >\n              <div data-line={`${props.lineNumber}-extend-content`} data-side={SplitSide[props.side]} />\n            </td>\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitExtendLine\", props: [\"index\", \"diffFile\", \"lineNumber\", \"side\"] }\n);\n", "export const ExpandDown = ({ className }: { className: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" class={className}>\n      <path d=\"m8.177 14.323 2.896-2.896a.25.25 0 0 0-.177-.427H8.75V7.764a.75.75 0 1 0-1.5 0V11H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0ZM2.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75ZM8.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z\"></path>\n    </svg>\n  );\n};\n\nexport const ExpandUp = ({ className }: { className?: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" class={className}>\n      <path d=\"M7.823 1.677 4.927 4.573A.25.25 0 0 0 5.104 5H7.25v3.236a.75.75 0 1 0 1.5 0V5h2.146a.25.25 0 0 0 .177-.427L8.177 1.677a.25.25 0 0 0-.354 0ZM13.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm-3.75.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM7.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM4 11.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM1.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z\"></path>\n    </svg>\n  );\n};\n\nexport const ExpandAll = ({ className }: { className?: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" class={className}>\n      <path d=\"m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z\"></path>\n    </svg>\n  );\n};\n", "import { composeLen, type DiffFile } from \"@git-diff-view/core\";\nimport {\n  hunkContentBGName,\n  hunkContentColorName,\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n  diffAsideWidthName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { useMode } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\nimport { DiffModeEnum, SplitSide } from \"./DiffView\";\n\nconst DiffSplitHunkLineGitHub = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const currentHunk = computed(() => props.diffFile.getSplitHunkLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const couldExpand = computed(() => enableExpand.value && currentHunk.value && currentHunk.value.splitInfo);\n\n    const lineSelector = computed(() => `tr[data-line=\"${props.lineNumber}-hunk\"]`);\n\n    const currentShowExpand = computed(() => props.side === SplitSide.old);\n\n    const currentSyncHeightSide = computed(() => SplitSide[SplitSide.old]);\n\n    const currentIsFirstLine = computed(() => currentHunk.value && currentHunk.value.isFirst);\n\n    const currentIsLastLine = computed(() => currentHunk.value && currentHunk.value.isLast);\n\n    const currentIsPureHunk = computed(\n      () => currentHunk.value && props.diffFile._getIsPureDiffRender() && !currentHunk.value.splitInfo\n    );\n\n    const currentShowExpandAll = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen\n    );\n\n    const currentIsShow = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex\n    );\n\n    useSubscribeDiffFile(props, () => {\n      currentShowExpandAll.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen;\n\n      currentIsShow.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex;\n    });\n\n    const currentEnableSyncHeight = computed(\n      () => props.side === SplitSide.new && (currentIsShow.value || currentIsPureHunk.value)\n    );\n\n    useSyncHeight({\n      selector: lineSelector,\n      wrapper: lineSelector,\n      side: currentSyncHeightSide,\n      enable: currentEnableSyncHeight,\n    });\n\n    return () => {\n      if (!currentIsShow.value && !currentIsPureHunk.value) return null;\n\n      return (\n        <tr\n          data-line={`${props.lineNumber}-hunk`}\n          data-state=\"hunk\"\n          data-side={SplitSide[props.side]}\n          style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          class=\"diff-line diff-line-hunk\"\n        >\n          {currentShowExpand.value ? (\n            <>\n              <td\n                class=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[40px] select-none p-[1px]\"\n                style={{\n                  backgroundColor: `var(${hunkLineNumberBGName})`,\n                  color: `var(${plainLineNumberColorName})`,\n                  width: `var(${diffAsideWidthName})`,\n                  minWidth: `var(${diffAsideWidthName})`,\n                  maxWidth: `var(${diffAsideWidthName})`,\n                }}\n              >\n                {couldExpand.value ? (\n                  currentIsFirstLine.value ? (\n                    <button\n                      class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                      title=\"Expand Up\"\n                      data-title=\"Expand Up\"\n                      onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                    >\n                      <ExpandUp className=\"fill-current\" />\n                    </button>\n                  ) : currentIsLastLine.value ? (\n                    <button\n                      class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                      title=\"Expand Down\"\n                      data-title=\"Expand Down\"\n                      onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                    >\n                      <ExpandDown className=\"fill-current\" />\n                    </button>\n                  ) : currentShowExpandAll.value ? (\n                    <button\n                      class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                      title=\"Expand All\"\n                      data-title=\"Expand All\"\n                      onClick={() => props.diffFile.onSplitHunkExpand(\"all\", props.index)}\n                    >\n                      <ExpandAll className=\"fill-current\" />\n                    </button>\n                  ) : (\n                    <>\n                      <button\n                        class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                        title=\"Expand Down\"\n                        data-title=\"Expand Down\"\n                        onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                      >\n                        <ExpandDown className=\"fill-current\" />\n                      </button>\n                      <button\n                        class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                        title=\"Expand Up\"\n                        data-title=\"Expand Up\"\n                        onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                      >\n                        <ExpandUp className=\"fill-current\" />\n                      </button>\n                    </>\n                  )\n                ) : (\n                  <div class=\"min-h-[28px]\">&ensp;</div>\n                )}\n              </td>\n              <td\n                class=\"diff-line-hunk-content pr-[10px] align-middle\"\n                style={{ backgroundColor: `var(${hunkContentBGName})` }}\n              >\n                <div\n                  class=\"pl-[1.5em]\"\n                  style={{\n                    color: `var(${hunkContentColorName})`,\n                  }}\n                >\n                  {currentHunk.value.splitInfo?.plainText || currentHunk.value.text}\n                </div>\n              </td>\n            </>\n          ) : (\n            <td\n              class=\"diff-line-hunk-placeholder select-none\"\n              colspan={2}\n              style={{ backgroundColor: `var(${hunkContentBGName})` }}\n            >\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            </td>\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\", \"side\"] }\n);\n\nconst DiffSplitHunkLineGitLab = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const currentHunk = computed(() => props.diffFile.getSplitHunkLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const lineSelector = computed(() => `tr[data-line=\"${props.lineNumber}-hunk\"]`);\n\n    const couldExpand = computed(() => enableExpand.value && currentHunk.value && currentHunk.value.splitInfo);\n\n    const currentShowExpandAll = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen\n    );\n\n    const currentIsFirstLine = computed(() => currentHunk.value && currentHunk.value.isFirst);\n\n    const currentIsPureHunk = computed(\n      () => currentHunk.value && props.diffFile._getIsPureDiffRender() && !currentHunk.value.splitInfo\n    );\n\n    const currentIsLastLine = computed(() => currentHunk.value && currentHunk.value.isLast);\n\n    const currentIsShow = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex\n    );\n\n    const currentSyncHeightSide = computed(() => SplitSide[SplitSide.old]);\n\n    const currentEnableSyncHeight = computed(\n      () => props.side === SplitSide.new && (currentIsShow.value || currentIsPureHunk.value)\n    );\n\n    useSyncHeight({\n      selector: lineSelector,\n      wrapper: lineSelector,\n      side: currentSyncHeightSide,\n      enable: currentEnableSyncHeight,\n    });\n\n    useSubscribeDiffFile(props, () => {\n      currentShowExpandAll.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen;\n\n      currentIsShow.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex;\n    });\n\n    return () => {\n      if (!currentIsShow.value && !currentIsPureHunk.value) return null;\n\n      return (\n        <tr\n          data-line={`${props.lineNumber}-hunk`}\n          data-state=\"hunk\"\n          data-side={SplitSide[props.side]}\n          style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          class=\"diff-line diff-line-hunk\"\n        >\n          <td\n            class=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[40px] select-none p-[1px]\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n              width: `var(${diffAsideWidthName})`,\n              minWidth: `var(${diffAsideWidthName})`,\n              maxWidth: `var(${diffAsideWidthName})`,\n            }}\n          >\n            {couldExpand.value ? (\n              currentIsFirstLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : currentIsLastLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : currentShowExpandAll.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"all\", props.index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            class=\"diff-line-hunk-content pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          >\n            <div\n              class=\"pl-[1.5em]\"\n              style={{\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.value.splitInfo?.plainText || currentHunk.value.text}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\", \"side\"] }\n);\n\nexport const DiffSplitHunkLine = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const diffViewMode = useMode();\n\n    return () => {\n      if (diffViewMode.value === DiffModeEnum.SplitGitHub || diffViewMode.value === DiffModeEnum.Split) {\n        return (\n          <DiffSplitHunkLineGitHub\n            index={props.index}\n            side={props.side}\n            diffFile={props.diffFile}\n            lineNumber={props.lineNumber}\n          />\n        );\n      } else {\n        return (\n          <DiffSplitHunkLineGitLab\n            index={props.index}\n            side={props.side}\n            diffFile={props.diffFile}\n            lineNumber={props.lineNumber}\n          />\n        );\n      }\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\", \"side\"] }\n);\n", "import { emptyBGName } from \"@git-diff-view/utils\";\nimport { computed, defineComponent } from \"vue\";\n\nimport { useSetWidget, useSlots, useWidget } from \"../context\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitWidgetLine = defineComponent(\n  (props: { index: number; side: SplitSide; diffFile: DiffFile; lineNumber: number }) => {\n    const slots = useSlots();\n\n    const widget = useWidget();\n\n    const setWidget = useSetWidget();\n\n    const oldLine = computed(() => props.diffFile.getSplitLeftLine(props.index));\n\n    const newLine = computed(() => props.diffFile.getSplitRightLine(props.index));\n\n    const oldLineWidget = computed(\n      () =>\n        oldLine.value.lineNumber &&\n        widget.value.side === SplitSide.old &&\n        widget.value.lineNumber === oldLine.value.lineNumber\n    );\n\n    const newLineWidget = computed(\n      () =>\n        newLine.value.lineNumber &&\n        widget.value.side === SplitSide.new &&\n        widget.value.lineNumber === newLine.value.lineNumber\n    );\n\n    const currentLine = computed(() => (props.side === SplitSide.old ? oldLine.value : newLine.value));\n\n    const currentIsHidden = computed(() => currentLine.value.isHidden);\n\n    const lineSelector = computed(() => `div[data-line=\"${props.lineNumber}-widget-content\"]`);\n\n    const lineWrapperSelector = computed(() => `tr[data-line=\"${props.lineNumber}-widget\"]`);\n\n    const wrapperSelector = computed(() =>\n      props.side === SplitSide.old ? \".old-diff-table-wrapper\" : \".new-diff-table-wrapper\"\n    );\n\n    const currentWidget = computed(() => (props.side === SplitSide.old ? oldLineWidget.value : newLineWidget.value));\n\n    const observeSide = computed(\n      () => SplitSide[currentWidget ? props.side : props.side === SplitSide.old ? SplitSide.new : SplitSide.old]\n    );\n\n    const currentIsShow = computed(\n      () => (!!oldLineWidget.value || !!newLineWidget.value) && !currentIsHidden.value && !!slots.widget\n    );\n\n    const currentEnable = computed(() => currentWidget.value && !!currentIsShow.value);\n\n    const onCloseWidget = () => setWidget({});\n\n    useSyncHeight({\n      selector: lineSelector,\n      wrapper: lineWrapperSelector,\n      side: observeSide,\n      enable: currentIsShow,\n    });\n\n    const width = useDomWidth({\n      selector: wrapperSelector,\n      enable: currentEnable,\n    });\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      return (\n        <tr\n          data-line={`${props.lineNumber}-widget`}\n          data-state=\"widget\"\n          data-side={SplitSide[props.side]}\n          class=\"diff-line diff-line-widget\"\n        >\n          {currentWidget.value ? (\n            <td class={`diff-line-widget-${SplitSide[props.side]}-content p-0`} colspan={2}>\n              <div\n                data-line={`${props.lineNumber}-widget-content`}\n                data-side={SplitSide[props.side]}\n                class=\"diff-line-widget-wrapper sticky left-0 z-[1]\"\n                style={{ width: width.value + \"px\" }}\n              >\n                {width.value > 0 &&\n                  slots.widget?.({\n                    diffFile: props.diffFile,\n                    side: props.side,\n                    lineNumber: currentLine.value.lineNumber,\n                    onClose: onCloseWidget,\n                  })}\n              </div>\n            </td>\n          ) : (\n            <td\n              class={`diff-line-widget-${SplitSide[props.side]}-placeholder select-none p-0`}\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            >\n              <div data-line={`${props.lineNumber}-widget-content`} data-side={SplitSide[props.side]} />\n            </td>\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitWidgetLine\", props: [\"diffFile\", \"index\", \"lineNumber\", \"side\"] }\n);\n", "import { getSplitContentLines } from \"@git-diff-view/core\";\nimport {\n  diffAsideWidthName,\n  diffFontSizeName,\n  removeAllSelection,\n  syncScroll,\n  borderColorName,\n  getDiffIdFromElement,\n} from \"@git-diff-view/utils\";\nimport { Fragment, computed, defineComponent, ref, watchPostEffect } from \"vue\";\n\nimport { useFontSize } from \"../context\";\nimport { useIsMounted } from \"../hooks/useIsMounted\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffSplitContentLine } from \"./DiffSplitContentLineNormal\";\nimport { DiffSplitExtendLine } from \"./DiffSplitExtendLineNormal\";\nimport { DiffSplitHunkLine } from \"./DiffSplitHunkLineNormal\";\nimport { DiffSplitWidgetLine } from \"./DiffSplitWidgetLineNormal\";\nimport { SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst DiffSplitViewTable = defineComponent(\n  (props: {\n    side: SplitSide;\n    diffFile: DiffFile;\n    onSelect?: (side?: SplitSide) => void;\n    selectState: { current?: SplitSide };\n  }) => {\n    const className = computed(() => (props.side === SplitSide.new ? \"new-diff-table\" : \"old-diff-table\"));\n\n    const lines = ref(getSplitContentLines(props.diffFile));\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      lines.value = getSplitContentLines(diffFile);\n    });\n\n    const selectState = props.selectState;\n\n    const onMouseDown = (e: MouseEvent) => {\n      let ele = e.target as HTMLElement;\n\n      if (ele && ele?.nodeName === \"BUTTON\") {\n        removeAllSelection();\n        return;\n      }\n\n      const id = getDiffIdFromElement(ele as HTMLElement);\n\n      if (id && id !== `diff-root${props.diffFile.getId()}`) {\n        return;\n      }\n\n      while (ele && ele instanceof HTMLElement) {\n        const state = ele.getAttribute(\"data-state\");\n        if (state) {\n          if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n            if (selectState.current !== undefined) {\n              selectState.current = undefined;\n              props.onSelect?.(undefined);\n              removeAllSelection();\n            }\n          } else {\n            if (selectState.current !== props.side) {\n              selectState.current = props.side;\n              props.onSelect?.(props.side);\n              removeAllSelection();\n            }\n          }\n          return;\n        }\n        ele = ele.parentElement;\n      }\n    };\n\n    return () => {\n      return (\n        <table class={className.value + \" w-full border-collapse border-spacing-0\"} data-mode={SplitSide[props.side]}>\n          <colgroup>\n            <col class={`diff-table-${SplitSide[props.side]}-num-col`} />\n            <col class={`diff-table-${SplitSide[props.side]}-content-col`} />\n          </colgroup>\n          <thead class=\"hidden\">\n            <tr>\n              <th scope=\"col\">{SplitSide[props.side]} line number</th>\n              <th scope=\"col\">{SplitSide[props.side]} line content</th>\n            </tr>\n          </thead>\n          <tbody class=\"diff-table-body leading-[1.6]\" onMousedown={onMouseDown}>\n            {lines.value.map((item) => (\n              <Fragment key={item.index}>\n                <DiffSplitHunkLine\n                  index={item.index}\n                  side={props.side}\n                  lineNumber={item.lineNumber}\n                  diffFile={props.diffFile}\n                />\n                <DiffSplitContentLine\n                  index={item.index}\n                  side={props.side}\n                  lineNumber={item.lineNumber}\n                  diffFile={props.diffFile}\n                />\n                <DiffSplitWidgetLine\n                  index={item.index}\n                  side={props.side}\n                  lineNumber={item.lineNumber}\n                  diffFile={props.diffFile}\n                />\n                <DiffSplitExtendLine\n                  index={item.index}\n                  side={props.side}\n                  lineNumber={item.lineNumber}\n                  diffFile={props.diffFile}\n                />\n              </Fragment>\n            ))}\n            <DiffSplitHunkLine\n              side={props.side}\n              index={props.diffFile.splitLineLength}\n              lineNumber={props.diffFile.splitLineLength}\n              diffFile={props.diffFile}\n            />\n          </tbody>\n        </table>\n      );\n    };\n  },\n  { name: \"DiffSplitViewTable\", props: [\"diffFile\", \"side\", \"onSelect\", \"selectState\"] }\n);\n\nexport const DiffSplitViewNormal = defineComponent(\n  (props: { diffFile: DiffFile }) => {\n    const isMounted = useIsMounted();\n\n    const ref1 = ref<HTMLDivElement>();\n\n    const ref2 = ref<HTMLDivElement>();\n\n    const styleRef = ref<HTMLStyleElement>();\n\n    const maxText = computed(() => Math.max(props.diffFile.splitLineLength, props.diffFile.fileLineLength).toString());\n\n    const initSyncScroll = (onClean: (cb: () => void) => void) => {\n      if (!isMounted.value) return;\n      const left = ref1.value;\n      const right = ref2.value;\n      if (!left || !right) return;\n      const clean = syncScroll(left, right);\n      onClean(clean);\n    };\n\n    watchPostEffect(initSyncScroll);\n\n    const onSelect = (side?: SplitSide) => {\n      const ele = styleRef.value;\n\n      if (!ele) return;\n\n      if (!side) {\n        ele.textContent = \"\";\n      } else {\n        const id = `diff-root${props.diffFile.getId()}`;\n        ele.textContent = `#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n      }\n    };\n\n    const fontSize = useFontSize();\n\n    const selectState = { current: undefined as SplitSide | undefined };\n\n    const font = computed(() => ({ fontSize: fontSize.value + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }));\n\n    const width = useTextWidth({ text: maxText, font });\n\n    const computedWidth = computed(() => Math.max(40, width.value + 25));\n\n    return () => {\n      return (\n        <div class=\"split-diff-view split-diff-view-normal flex w-full basis-[50%]\">\n          <style data-select-style ref={styleRef} />\n          <div\n            class=\"old-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n            ref={ref1}\n            style={{\n              [diffAsideWidthName]: `${Math.round(computedWidth.value)}px`,\n              overscrollBehaviorX: \"none\",\n              fontFamily: \"Menlo, Consolas, monospace\",\n              fontSize: `var(${diffFontSizeName})`,\n            }}\n          >\n            <DiffSplitViewTable\n              side={SplitSide.old}\n              diffFile={props.diffFile}\n              onSelect={onSelect}\n              selectState={selectState}\n            />\n          </div>\n          <div class=\"diff-split-line w-[1.5px]\" style={{ backgroundColor: `var(${borderColorName})` }} />\n          <div\n            class=\"new-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n            ref={ref2}\n            style={{\n              [diffAsideWidthName]: `${Math.round(computedWidth.value)}px`,\n              overscrollBehaviorX: \"none\",\n              fontFamily: \"Menlo, Consolas, monospace\",\n              fontSize: `var(${diffFontSizeName})`,\n            }}\n          >\n            <DiffSplitViewTable\n              side={SplitSide.new}\n              diffFile={props.diffFile}\n              onSelect={onSelect}\n              selectState={selectState}\n            />\n          </div>\n        </div>\n      );\n    };\n  },\n  { name: \"DiffSplitViewNormal\", props: [\"diffFile\"] }\n);\n", "import { DiffLineType, type DiffFile, checkDiffLineIncludeChange } from \"@git-diff-view/core\";\nimport {\n  borderColorName,\n  emptyBGName,\n  expandLineNumberColorName,\n  getContentBG,\n  getLineNumberBG,\n  plainLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { useEnableAddWidget, useEnableHighlight, useOnAddWidgetClick, useSetWidget } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\n\nimport { DiffSplitAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\nimport { SplitSide } from \"./DiffView\";\n\nexport const DiffSplitContentLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const setWidget = useSetWidget();\n\n    const enableAddWidget = useEnableAddWidget();\n\n    const enableHighlight = useEnableHighlight();\n\n    const onAddWidgetClick = useOnAddWidgetClick();\n\n    const oldLine = computed(() => props.diffFile.getSplitLeftLine(props.index));\n\n    const newLine = computed(() => props.diffFile.getSplitRightLine(props.index));\n\n    const oldSyntaxLine = ref(props.diffFile.getOldSyntaxLine(oldLine.value?.lineNumber));\n\n    const newSyntaxLine = ref(props.diffFile.getNewSyntaxLine(newLine.value?.lineNumber));\n\n    const oldPlainLine = ref(props.diffFile.getOldPlainLine(oldLine.value.lineNumber));\n\n    const newPlainLine = ref(props.diffFile.getNewPlainLine(newLine.value.lineNumber));\n\n    const hasDiff = computed(() => !!oldLine.value?.diff || !!newLine.value?.diff);\n\n    const hasChange = computed(\n      () => checkDiffLineIncludeChange(oldLine.value?.diff) || checkDiffLineIncludeChange(newLine.value?.diff)\n    );\n\n    const hasHidden = computed(() => oldLine.value?.isHidden && newLine.value?.isHidden);\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      oldSyntaxLine.value = diffFile.getOldSyntaxLine(oldLine.value?.lineNumber);\n\n      newSyntaxLine.value = diffFile.getNewSyntaxLine(newLine.value?.lineNumber);\n\n      oldPlainLine.value = diffFile.getOldPlainLine(oldLine.value.lineNumber);\n\n      newPlainLine.value = diffFile.getNewPlainLine(newLine.value.lineNumber);\n    });\n\n    const onOpenAddWidget = (lineNumber: number, side: SplitSide) => setWidget({ side: side, lineNumber: lineNumber });\n\n    return () => {\n      if (hasHidden.value) return null;\n\n      const hasOldLine = !!oldLine.value?.lineNumber;\n\n      const hasNewLine = !!newLine.value?.lineNumber;\n\n      const oldLineIsDelete = oldLine.value?.diff?.type === DiffLineType.Delete;\n\n      const newLineIsAdded = newLine.value?.diff?.type === DiffLineType.Add;\n\n      const oldLineContentBG = getContentBG(false, oldLineIsDelete, hasDiff.value);\n\n      const oldLineNumberBG = getLineNumberBG(false, oldLineIsDelete, hasDiff.value);\n\n      const newLineContentBG = getContentBG(newLineIsAdded, false, hasDiff.value);\n\n      const newLineNumberBG = getLineNumberBG(newLineIsAdded, false, hasDiff.value);\n\n      return (\n        <tr data-line={props.lineNumber} data-state={hasDiff.value ? \"diff\" : \"plain\"} class=\"diff-line\">\n          {hasOldLine ? (\n            <>\n              <td\n                class=\"diff-line-old-num group relative w-[1%] min-w-[40px] select-none pl-[10px] pr-[10px] text-right align-top\"\n                style={{\n                  backgroundColor: oldLineNumberBG,\n                  color: `var(${hasDiff.value ? plainLineNumberColorName : expandLineNumberColorName})`,\n                }}\n              >\n                {hasDiff.value && enableAddWidget.value && (\n                  <DiffSplitAddWidget\n                    index={props.index}\n                    lineNumber={oldLine.value.lineNumber}\n                    side={SplitSide.old}\n                    diffFile={props.diffFile}\n                    onWidgetClick={onAddWidgetClick}\n                    className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                    onOpenAddWidget={onOpenAddWidget}\n                  />\n                )}\n                <span data-line-num={oldLine.value.lineNumber} style={{ opacity: hasChange.value ? undefined : 0.5 }}>\n                  {oldLine.value.lineNumber}\n                </span>\n              </td>\n              <td\n                class=\"diff-line-old-content group relative pr-[10px] align-top\"\n                style={{ backgroundColor: oldLineContentBG }}\n                data-side={SplitSide[SplitSide.old]}\n              >\n                {hasDiff.value && enableAddWidget.value && (\n                  <DiffSplitAddWidget\n                    index={props.index}\n                    lineNumber={oldLine.value.lineNumber}\n                    side={SplitSide.old}\n                    diffFile={props.diffFile}\n                    onWidgetClick={onAddWidgetClick}\n                    className=\"absolute right-[100%] z-[1] translate-x-[50%]\"\n                    onOpenAddWidget={onOpenAddWidget}\n                  />\n                )}\n                <DiffContent\n                  enableWrap={true}\n                  diffFile={props.diffFile}\n                  rawLine={oldLine.value?.value}\n                  diffLine={oldLine.value?.diff}\n                  plainLine={oldPlainLine.value}\n                  syntaxLine={oldSyntaxLine.value}\n                  enableHighlight={enableHighlight.value}\n                />\n              </td>\n            </>\n          ) : (\n            <td\n              class=\"diff-line-old-placeholder select-none\"\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            >\n              <span>&ensp;</span>\n            </td>\n          )}\n          {hasNewLine ? (\n            <>\n              <td\n                class=\"diff-line-new-num group relative w-[1%] min-w-[40px] select-none border-l-[1px] pl-[10px] pr-[10px] text-right align-top\"\n                style={{\n                  backgroundColor: newLineNumberBG,\n                  color: `var(${hasDiff.value ? plainLineNumberColorName : expandLineNumberColorName})`,\n                  borderLeftColor: `var(${borderColorName})`,\n                  borderLeftStyle: \"solid\",\n                }}\n              >\n                {hasDiff.value && enableAddWidget.value && (\n                  <DiffSplitAddWidget\n                    index={props.index}\n                    lineNumber={newLine.value.lineNumber}\n                    side={SplitSide.new}\n                    diffFile={props.diffFile}\n                    onWidgetClick={onAddWidgetClick}\n                    className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                    onOpenAddWidget={onOpenAddWidget}\n                  />\n                )}\n                <span data-line-num={newLine.value.lineNumber} style={{ opacity: hasChange.value ? undefined : 0.5 }}>\n                  {newLine.value.lineNumber}\n                </span>\n              </td>\n              <td\n                class=\"diff-line-new-content group relative pr-[10px] align-top\"\n                style={{ backgroundColor: newLineContentBG }}\n                data-side={SplitSide[SplitSide.new]}\n              >\n                {hasDiff.value && enableAddWidget.value && (\n                  <DiffSplitAddWidget\n                    index={props.index}\n                    lineNumber={newLine.value.lineNumber}\n                    side={SplitSide.new}\n                    diffFile={props.diffFile}\n                    onWidgetClick={onAddWidgetClick}\n                    className=\"absolute right-[100%] z-[1] translate-x-[50%]\"\n                    onOpenAddWidget={onOpenAddWidget}\n                  />\n                )}\n                <DiffContent\n                  enableWrap={true}\n                  diffFile={props.diffFile}\n                  rawLine={newLine.value?.value || \"\"}\n                  diffLine={newLine.value?.diff}\n                  plainLine={newPlainLine.value}\n                  syntaxLine={newSyntaxLine.value}\n                  enableHighlight={enableHighlight.value}\n                />\n              </td>\n            </>\n          ) : (\n            <td\n              class=\"diff-line-new-placeholder select-none border-l-[1px]\"\n              style={{\n                backgroundColor: `var(${emptyBGName})`,\n                borderLeftColor: `var(${borderColorName})`,\n                borderLeftStyle: \"solid\",\n              }}\n              colspan={2}\n            >\n              <span>&ensp;</span>\n            </td>\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitContentLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { borderColorName, emptyBGName } from \"@git-diff-view/utils\";\nimport { computed, defineComponent } from \"vue\";\n\nimport { useExtendData, useSlots } from \"../context\";\n\nimport { SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitExtendLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const extendData = useExtendData();\n\n    const slots = useSlots();\n\n    const oldLine = computed(() => props.diffFile.getSplitLeftLine(props.index));\n\n    const newLine = computed(() => props.diffFile.getSplitRightLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const oldLineExtend = computed(() => extendData.value?.oldFile?.[oldLine.value?.lineNumber]);\n\n    const newLineExtend = computed(() => extendData.value?.newFile?.[newLine.value.lineNumber]);\n\n    const hasHidden = computed(() => oldLine.value.isHidden && newLine.value.isHidden);\n\n    const currentIsShow = computed(() =>\n      Boolean((oldLineExtend.value || newLineExtend.value) && (!hasHidden.value || enableExpand.value) && slots.extend)\n    );\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      const oldExtendRendered = oldLineExtend.value\n        ? slots.extend?.({\n            diffFile: props.diffFile,\n            side: SplitSide.old,\n            lineNumber: oldLine.value.lineNumber,\n            data: oldLineExtend.value.data,\n            onUpdate: props.diffFile.notifyAll,\n          })\n        : null;\n\n      const newExtendRendered = newLineExtend.value\n        ? slots.extend?.({\n            diffFile: props.diffFile,\n            side: SplitSide.new,\n            lineNumber: newLine.value.lineNumber,\n            data: newLineExtend.value.data,\n            onUpdate: props.diffFile.notifyAll,\n          })\n        : null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-extend`} data-state=\"extend\" class=\"diff-line diff-line-extend\">\n          {oldExtendRendered ? (\n            <td class=\"diff-line-extend-old-content p-0\" colspan={2}>\n              <div class=\"diff-line-extend-wrapper\">{oldExtendRendered}</div>\n            </td>\n          ) : (\n            <td\n              class=\"diff-line-extend-old-placeholder select-none p-0\"\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            />\n          )}\n          {newExtendRendered ? (\n            <td\n              class=\"diff-line-extend-new-content border-l-[1px] p-0\"\n              colspan={2}\n              style={{ borderLeftColor: `var(${borderColorName})`, borderLeftStyle: \"solid\" }}\n            >\n              <div class=\"diff-line-extend-wrapper\">{newExtendRendered}</div>\n            </td>\n          ) : (\n            <td\n              class=\"diff-line-extend-new-placeholder select-none border-l-[1px] p-0\"\n              style={{\n                backgroundColor: `var(${emptyBGName})`,\n                borderLeftColor: `var(${borderColorName})`,\n                borderLeftStyle: \"solid\",\n              }}\n              colspan={2}\n            />\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitExtendLine\", props: [\"index\", \"diffFile\", \"lineNumber\"] }\n);\n", "import { composeLen, type DiffFile } from \"@git-diff-view/core\";\nimport {\n  borderColorName,\n  hunkContentBGName,\n  hunkContentColorName,\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { DiffModeEnum } from \"..\";\nimport { useMode } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\n\nconst DiffSplitHunkLineGitHub = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const currentHunk = computed(() => props.diffFile.getSplitHunkLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const couldExpand = computed(() => enableExpand.value && currentHunk.value && currentHunk.value.splitInfo);\n\n    const currentShowExpandAll = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen\n    );\n\n    const currentIsShow = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex\n    );\n\n    const currentIsFirstLine = computed(() => currentHunk.value && currentHunk.value.isFirst);\n\n    const currentIsLastLine = computed(() => currentHunk.value && currentHunk.value.isLast);\n\n    const currentIsPureHunk = computed(\n      () => currentHunk.value && props.diffFile._getIsPureDiffRender() && !currentHunk.value.splitInfo\n    );\n\n    useSubscribeDiffFile(props, () => {\n      currentShowExpandAll.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen;\n\n      currentIsShow.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex;\n    });\n\n    return () => {\n      if (!currentIsShow.value && !currentIsPureHunk.value) return null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-hunk`} data-state=\"hunk\" class=\"diff-line diff-line-hunk\">\n          <td\n            class=\"diff-line-hunk-action relative w-[1%] min-w-[40px] select-none p-[1px]\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n            }}\n          >\n            {couldExpand.value ? (\n              currentIsFirstLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : currentIsLastLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : currentShowExpandAll.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"all\", props.index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            class=\"diff-line-hunk-content pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n            colspan={3}\n          >\n            <div\n              class=\"pl-[1.5em]\"\n              style={{\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.value.splitInfo?.plainText || currentHunk.value.text}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n\nconst DiffSplitHunkLineGitLab = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const currentHunk = computed(() => props.diffFile.getSplitHunkLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const couldExpand = computed(() => enableExpand.value && currentHunk.value && currentHunk.value.splitInfo);\n\n    const currentShowExpandAll = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen\n    );\n\n    const currentIsShow = ref(\n      currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex\n    );\n\n    const currentIsFirstLine = computed(() => currentHunk.value && currentHunk.value.isFirst);\n\n    const currentIsPureHunk = computed(\n      () => currentHunk.value && props.diffFile._getIsPureDiffRender() && !currentHunk.value.splitInfo\n    );\n\n    const currentIsLastLine = computed(() => currentHunk.value && currentHunk.value.isLast);\n\n    useSubscribeDiffFile(props, () => {\n      currentShowExpandAll.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.endHiddenIndex - currentHunk.value.splitInfo.startHiddenIndex < composeLen;\n\n      currentIsShow.value =\n        currentHunk.value &&\n        currentHunk.value.splitInfo &&\n        currentHunk.value.splitInfo.startHiddenIndex < currentHunk.value.splitInfo.endHiddenIndex;\n    });\n\n    return () => {\n      if (!currentIsShow.value && !currentIsPureHunk.value) return null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-hunk`} data-state=\"hunk\" class=\"diff-line diff-line-hunk\">\n          <td\n            class=\"diff-line-hunk-action relative w-[1%] min-w-[40px] select-none p-[1px]\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n            }}\n          >\n            {couldExpand.value ? (\n              currentIsFirstLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : currentIsLastLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : currentShowExpandAll.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"all\", props.index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            class=\"diff-line-hunk-content pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          >\n            <div\n              class=\"pl-[1.5em]\"\n              style={{\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.value.splitInfo?.plainText || currentHunk.value.text}\n            </div>\n          </td>\n          <td\n            class=\"diff-line-hunk-action relative z-[1] w-[1%] min-w-[40px] select-none border-l-[1px] p-[1px]\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n              borderLeftColor: `var(${borderColorName})`,\n              borderLeftStyle: \"solid\",\n            }}\n          >\n            {couldExpand.value ? (\n              currentIsFirstLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : currentIsLastLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : currentShowExpandAll.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => props.diffFile.onSplitHunkExpand(\"all\", props.index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"down\", props.index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => props.diffFile.onSplitHunkExpand(\"up\", props.index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            class=\"diff-line-hunk-content relative pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          >\n            <div\n              class=\"pl-[1.5em]\"\n              style={{\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.value.splitInfo?.plainText || currentHunk.value.text}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n\nexport const DiffSplitHunkLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const diffViewMode = useMode();\n\n    return () => {\n      if (diffViewMode.value === DiffModeEnum.SplitGitHub || diffViewMode.value === DiffModeEnum.Split) {\n        return <DiffSplitHunkLineGitHub index={props.index} diffFile={props.diffFile} lineNumber={props.lineNumber} />;\n      } else {\n        return <DiffSplitHunkLineGitLab index={props.index} diffFile={props.diffFile} lineNumber={props.lineNumber} />;\n      }\n    };\n  },\n  { name: \"DiffSplitHunkLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { borderColorName, emptyBGName } from \"@git-diff-view/utils\";\nimport { computed, defineComponent } from \"vue\";\n\nimport { useSetWidget, useSlots, useWidget } from \"../context\";\n\nimport { SplitSide } from \"./DiffView\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitWidgetLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const slots = useSlots();\n\n    const widget = useWidget();\n\n    const setWidget = useSetWidget();\n\n    const oldLine = computed(() => props.diffFile.getSplitLeftLine(props.index));\n\n    const newLine = computed(() => props.diffFile.getSplitRightLine(props.index));\n\n    const oldLineWidget = computed(\n      () =>\n        oldLine.value.lineNumber &&\n        widget.value.side === SplitSide.old &&\n        widget.value.lineNumber === oldLine.value.lineNumber\n    );\n\n    const newLineWidget = computed(\n      () =>\n        newLine.value.lineNumber &&\n        widget.value.side === SplitSide.new &&\n        widget.value.lineNumber === newLine.value.lineNumber\n    );\n\n    const hasHidden = computed(() => oldLine.value.isHidden && newLine.value.isHidden);\n\n    const currentIsShow = computed(\n      () => (!!oldLineWidget.value || !!newLineWidget.value) && !hasHidden.value && !!slots.widget\n    );\n\n    const onCloseWidget = () => setWidget({});\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      const oldWidgetRendered = oldLineWidget.value\n        ? slots.widget?.({\n            diffFile: props.diffFile,\n            side: SplitSide.old,\n            lineNumber: oldLine.value.lineNumber,\n            onClose: onCloseWidget,\n          })\n        : null;\n\n      const newWidgetRendered = newLineWidget.value\n        ? slots.widget?.({\n            diffFile: props.diffFile,\n            side: SplitSide.new,\n            lineNumber: newLine.value.lineNumber,\n            onClose: onCloseWidget,\n          })\n        : null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-widget`} data-state=\"widget\" class=\"diff-line diff-line-widget\">\n          {oldWidgetRendered ? (\n            <td class=\"diff-line-widget-old-content p-0\" colspan={2}>\n              <div class=\"diff-line-widget-wrapper\">{oldWidgetRendered}</div>\n            </td>\n          ) : (\n            <td\n              class=\"diff-line-widget-old-placeholder select-none p-0\"\n              style={{ backgroundColor: `var(${emptyBGName})` }}\n              colspan={2}\n            />\n          )}\n          {newWidgetRendered ? (\n            <td\n              class=\"diff-line-widget-new-content border-l-[1px] p-0\"\n              colspan={2}\n              style={{ borderLeftColor: `var(${borderColorName})`, borderLeftStyle: \"solid\" }}\n            >\n              <div class=\"diff-line-widget-wrapper\">{newWidgetRendered}</div>\n            </td>\n          ) : (\n            <td\n              class=\"diff-line-widget-new-placeholder select-none border-l-[1px] p-0\"\n              style={{\n                backgroundColor: `var(${emptyBGName})`,\n                borderLeftColor: `var(${borderColorName})`,\n                borderLeftStyle: \"solid\",\n              }}\n              colspan={2}\n            />\n          )}\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffSplitWidgetLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { getSplitContentLines } from \"@git-diff-view/core\";\nimport { diffAsideWidthName, diffFontSizeName, getDiffIdFromElement, removeAllSelection } from \"@git-diff-view/utils\";\nimport { Fragment, computed, defineComponent, ref } from \"vue\";\n\nimport { SplitSide } from \"..\";\nimport { useFontSize } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffSplitContentLine } from \"./DiffSplitContentLineWrap\";\nimport { DiffSplitExtendLine } from \"./DiffSplitExtendLineWrap\";\nimport { DiffSplitHunkLine } from \"./DiffSplitHunkLineWrap\";\nimport { DiffSplitWidgetLine } from \"./DiffSplitWidgetLineWrap\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitViewWrap = defineComponent(\n  (props: { diffFile: DiffFile }) => {\n    const lines = ref(getSplitContentLines(props.diffFile));\n\n    const maxText = computed(() => Math.max(props.diffFile.splitLineLength, props.diffFile.fileLineLength).toString());\n\n    const styleRef = ref<HTMLStyleElement | null>(null);\n\n    const selectState = { current: undefined as SplitSide | undefined };\n\n    const onSelect = (side?: SplitSide) => {\n      const ele = styleRef.value;\n\n      if (!ele) return;\n\n      if (!side) {\n        ele.textContent = \"\";\n      } else {\n        const id = `diff-root${props.diffFile.getId()}`;\n        ele.textContent = `#${id} [data-side=\"${SplitSide[side === SplitSide.old ? SplitSide.new : SplitSide.old]}\"] {user-select: none} \\n#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n      }\n    };\n\n    const onMouseDown = (e: MouseEvent) => {\n      let ele = e.target;\n\n      // need remove all the selection\n      if (ele && ele instanceof HTMLElement && ele.nodeName === \"BUTTON\") {\n        removeAllSelection();\n        return;\n      }\n\n      const id = getDiffIdFromElement(ele as HTMLElement);\n\n      if (id && id !== `diff-root${props.diffFile.getId()}`) {\n        return;\n      }\n\n      while (ele && ele instanceof HTMLElement) {\n        const state = ele.getAttribute(\"data-state\");\n        const side = ele.getAttribute(\"data-side\");\n        if (side) {\n          if (selectState.current !== SplitSide[side]) {\n            selectState.current = SplitSide[side];\n            onSelect(SplitSide[side]);\n            removeAllSelection();\n          }\n        }\n        if (state) {\n          if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n            if (selectState.current !== undefined) {\n              selectState.current = undefined;\n              onSelect(undefined);\n              removeAllSelection();\n            }\n            return;\n          } else {\n            return;\n          }\n        }\n\n        ele = ele.parentElement;\n      }\n    };\n\n    const fontSize = useFontSize();\n\n    const font = computed(() => ({ fontSize: fontSize.value + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }));\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      lines.value = getSplitContentLines(diffFile);\n    });\n\n    const width = useTextWidth({ text: maxText, font });\n\n    const computedWidth = computed(() => Math.max(40, width.value + 25));\n\n    return () => {\n      return (\n        <div class=\"split-diff-view split-diff-view-warp w-full\">\n          <div\n            class=\"diff-table-wrapper w-full\"\n            style={{\n              [diffAsideWidthName]: `${Math.round(computedWidth.value)}px`,\n              fontFamily: \"Menlo, Consolas, monospace\",\n              fontSize: `var(${diffFontSizeName})`,\n            }}\n          >\n            <style data-select-style ref={styleRef} />\n            <table class=\"diff-table w-full table-fixed border-collapse border-spacing-0\">\n              <colgroup>\n                <col class=\"diff-table-old-num-col\" width={Math.round(computedWidth.value)} />\n                <col class=\"diff-table-old-content-col\" />\n                <col class=\"diff-table-new-num-col\" width={Math.round(computedWidth.value)} />\n                <col class=\"diff-table-new-content-col\" />\n              </colgroup>\n              <thead class=\"hidden\">\n                <tr>\n                  <th scope=\"col\">old line number</th>\n                  <th scope=\"col\">old line content</th>\n                  <th scope=\"col\">new line number</th>\n                  <th scope=\"col\">new line content</th>\n                </tr>\n              </thead>\n              <tbody class=\"diff-table-body leading-[1.6]\" onMousedown={onMouseDown}>\n                {lines.value.map((item) => (\n                  <Fragment key={item.index}>\n                    <DiffSplitHunkLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffSplitContentLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffSplitWidgetLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffSplitExtendLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                  </Fragment>\n                ))}\n                <DiffSplitHunkLine\n                  index={props.diffFile.splitLineLength}\n                  lineNumber={props.diffFile.splitLineLength}\n                  diffFile={props.diffFile}\n                />\n              </tbody>\n            </table>\n          </div>\n        </div>\n      );\n    };\n  },\n  { name: \"DiffSplitViewWrap\", props: [\"diffFile\"] }\n);\n", "import { defineComponent } from \"vue\";\n\nimport { useEnableWrap } from \"../context\";\n\nimport { DiffSplitViewNormal } from \"./DiffSplitViewNormal\";\nimport { DiffSplitViewWrap } from \"./DiffSplitViewWrap\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitView = defineComponent(\n  (props: { diffFile: DiffFile }) => {\n    const enableWrap = useEnableWrap();\n\n    return () => {\n      return enableWrap.value ? (\n        <DiffSplitViewWrap diffFile={props.diffFile} />\n      ) : (\n        <DiffSplitViewNormal diffFile={props.diffFile} />\n      );\n    };\n  },\n  { name: \"DiffSplitView\", props: [\"diffFile\"] }\n);\n", "import { type DiffFile, type DiffLine, checkDiffLineIncludeChange, type File } from \"@git-diff-view/core\";\nimport {\n  diffAsideWidthName,\n  addContentBGName,\n  addLineNumberBGName,\n  delContentBGName,\n  delLineNumberBGName,\n  expandContentBGName,\n  plainContentBGName,\n  plainLineNumberBGName,\n  plainLineNumberColorName,\n  expandLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { SplitSide } from \"..\";\nimport { useEnableAddWidget, useEnableHighlight, useEnableWrap, useOnAddWidgetClick, useSetWidget } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\n\nimport { DiffUnifiedAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\n\nconst DiffUnifiedOldLine = ({\n  index,\n  diffLine,\n  rawLine,\n  plainLine,\n  syntaxLine,\n  lineNumber,\n  diffFile,\n  enableWrap,\n  enableAddWidget,\n  enableHighlight,\n  onOpenAddWidget,\n  onAddWidgetClick,\n}: {\n  index: number;\n  lineNumber: number;\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableAddWidget: boolean;\n  enableHighlight: boolean;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n  onAddWidgetClick?: (event: \"onAddWidgetClick\", lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <tr data-line={index} data-state=\"diff\" class=\"diff-line group\">\n      <td\n        class=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n        style={{\n          color: `var(${plainLineNumberColorName})`,\n          backgroundColor: `var(${delLineNumberBGName})`,\n          width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n        }}\n      >\n        {enableAddWidget && (\n          <DiffUnifiedAddWidget\n            index={index - 1}\n            lineNumber={lineNumber}\n            diffFile={diffFile}\n            side={SplitSide.old}\n            onWidgetClick={onAddWidgetClick}\n            onOpenAddWidget={onOpenAddWidget}\n          />\n        )}\n        <div class=\"flex\">\n          <span data-line-old-num={lineNumber} class=\"inline-block w-[50%]\">\n            {lineNumber}\n          </span>\n          <span class=\"w-[10px] shrink-0\" />\n          <span class=\"inline-block w-[50%]\" />\n        </div>\n      </td>\n      <td class=\"diff-line-content pr-[10px] align-top\" style={{ backgroundColor: `var(${delContentBGName})` }}>\n        <DiffContent\n          enableWrap={enableWrap}\n          diffFile={diffFile}\n          enableHighlight={enableHighlight}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          syntaxLine={syntaxLine}\n        />\n      </td>\n    </tr>\n  );\n};\n\nconst DiffUnifiedNewLine = ({\n  index,\n  diffLine,\n  rawLine,\n  plainLine,\n  syntaxLine,\n  lineNumber,\n  diffFile,\n  enableWrap,\n  enableAddWidget,\n  enableHighlight,\n  onOpenAddWidget,\n  onAddWidgetClick,\n}: {\n  index: number;\n  lineNumber: number;\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableAddWidget: boolean;\n  enableHighlight: boolean;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n  onAddWidgetClick?: (event: \"onAddWidgetClick\", lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <tr data-line={index} data-state=\"diff\" class=\"diff-line group\">\n      <td\n        class=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n        style={{\n          color: `var(${plainLineNumberColorName})`,\n          backgroundColor: `var(${addLineNumberBGName})`,\n          width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n        }}\n      >\n        {enableAddWidget && (\n          <DiffUnifiedAddWidget\n            index={index - 1}\n            lineNumber={lineNumber}\n            diffFile={diffFile}\n            side={SplitSide.new}\n            onWidgetClick={onAddWidgetClick}\n            onOpenAddWidget={onOpenAddWidget}\n          />\n        )}\n        <div class=\"flex\">\n          <span class=\"inline-block w-[50%]\" />\n          <span class=\"w-[10px] shrink-0\" />\n          <span data-line-new-num={lineNumber} class=\"inline-block w-[50%]\">\n            {lineNumber}\n          </span>\n        </div>\n      </td>\n      <td class=\"diff-line-content pr-[10px] align-top\" style={{ backgroundColor: `var(${addContentBGName})` }}>\n        <DiffContent\n          enableWrap={enableWrap}\n          diffFile={diffFile}\n          enableHighlight={enableHighlight}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          syntaxLine={syntaxLine}\n        />\n      </td>\n    </tr>\n  );\n};\n\nexport const DiffUnifiedContentLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const unifiedItem = computed(() => props.diffFile.getUnifiedLine(props.index));\n\n    const enableWrap = useEnableWrap();\n\n    const setWidget = useSetWidget();\n\n    const onAddWidgetClick = useOnAddWidgetClick();\n\n    const enableHighlight = useEnableHighlight();\n\n    const enableAddWidget = useEnableAddWidget();\n\n    const currentItemHasHidden = computed(() => unifiedItem.value?.isHidden);\n\n    const currentItemHasChange = computed(() => checkDiffLineIncludeChange(unifiedItem.value?.diff));\n\n    const currentSyntaxLine = ref(\n      unifiedItem.value?.newLineNumber\n        ? props.diffFile.getNewSyntaxLine(unifiedItem.value.newLineNumber)\n        : unifiedItem.value?.oldLineNumber\n          ? props.diffFile.getOldSyntaxLine(unifiedItem.value.oldLineNumber)\n          : undefined\n    );\n\n    const currentPlainLine = ref(\n      unifiedItem.value?.newLineNumber\n        ? props.diffFile.getNewPlainLine(unifiedItem.value.newLineNumber)\n        : unifiedItem.value?.oldLineNumber\n          ? props.diffFile.getOldPlainLine(unifiedItem.value.oldLineNumber)\n          : undefined\n    );\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      currentSyntaxLine.value = unifiedItem.value?.newLineNumber\n        ? diffFile.getNewSyntaxLine(unifiedItem.value.newLineNumber)\n        : unifiedItem.value?.oldLineNumber\n          ? diffFile.getOldSyntaxLine(unifiedItem.value.oldLineNumber)\n          : undefined;\n\n      currentPlainLine.value = unifiedItem.value?.newLineNumber\n        ? diffFile.getNewPlainLine(unifiedItem.value.newLineNumber)\n        : unifiedItem.value?.oldLineNumber\n          ? diffFile.getOldPlainLine(unifiedItem.value.oldLineNumber)\n          : undefined;\n    });\n\n    const onOpenAddWidget = (lineNumber: number, side: SplitSide) => setWidget({ side: side, lineNumber: lineNumber });\n\n    return () => {\n      if (currentItemHasHidden.value) return null;\n\n      if (currentItemHasChange.value) {\n        if (unifiedItem.value.oldLineNumber) {\n          return (\n            <DiffUnifiedOldLine\n              index={props.lineNumber}\n              enableWrap={enableWrap.value}\n              diffFile={props.diffFile}\n              rawLine={unifiedItem.value.value || \"\"}\n              diffLine={unifiedItem.value.diff}\n              plainLine={currentPlainLine.value}\n              syntaxLine={currentSyntaxLine.value}\n              enableHighlight={enableHighlight.value}\n              enableAddWidget={enableAddWidget.value}\n              lineNumber={unifiedItem.value.oldLineNumber}\n              onAddWidgetClick={onAddWidgetClick}\n              onOpenAddWidget={onOpenAddWidget}\n            />\n          );\n        } else {\n          return (\n            <DiffUnifiedNewLine\n              index={props.lineNumber}\n              enableWrap={enableWrap.value}\n              diffFile={props.diffFile}\n              rawLine={unifiedItem.value.value || \"\"}\n              diffLine={unifiedItem.value.diff}\n              plainLine={currentPlainLine.value}\n              syntaxLine={currentSyntaxLine.value}\n              enableHighlight={enableHighlight.value}\n              enableAddWidget={enableAddWidget.value}\n              lineNumber={unifiedItem.value.newLineNumber!}\n              onAddWidgetClick={onAddWidgetClick}\n              onOpenAddWidget={onOpenAddWidget}\n            />\n          );\n        }\n      } else {\n        return (\n          <tr\n            data-line={props.lineNumber}\n            data-state={unifiedItem.value.diff ? \"diff\" : \"plain\"}\n            class=\"diff-line group\"\n          >\n            <td\n              class=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n              style={{\n                color: `var(${unifiedItem.value.diff ? plainLineNumberColorName : expandLineNumberColorName})`,\n                backgroundColor: unifiedItem.value.diff\n                  ? `var(${plainLineNumberBGName})`\n                  : `var(${expandContentBGName})`,\n                width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n                maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n                minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              }}\n            >\n              {enableAddWidget.value && unifiedItem.value.diff && (\n                <DiffUnifiedAddWidget\n                  index={props.index}\n                  diffFile={props.diffFile}\n                  lineNumber={unifiedItem.value.newLineNumber}\n                  side={SplitSide.new}\n                  onOpenAddWidget={onOpenAddWidget}\n                  onWidgetClick={onAddWidgetClick}\n                />\n              )}\n              <div class=\"flex opacity-[0.5]\">\n                <span data-line-old-num={unifiedItem.value.oldLineNumber} class=\"inline-block w-[50%]\">\n                  {unifiedItem.value.oldLineNumber}\n                </span>\n                <span class=\"w-[10px] shrink-0\" />\n                <span data-line-new-num={unifiedItem.value.newLineNumber} class=\"inline-block w-[50%]\">\n                  {unifiedItem.value.newLineNumber}\n                </span>\n              </div>\n            </td>\n            <td\n              class=\"diff-line-content pr-[10px] align-top\"\n              style={{\n                backgroundColor: unifiedItem.value.diff ? `var(${plainContentBGName})` : `var(${expandContentBGName})`,\n              }}\n            >\n              <DiffContent\n                enableWrap={enableWrap.value}\n                diffFile={props.diffFile}\n                enableHighlight={enableHighlight.value}\n                rawLine={unifiedItem.value.value || \"\"}\n                diffLine={unifiedItem.value.diff}\n                plainLine={currentPlainLine.value}\n                syntaxLine={currentSyntaxLine.value}\n              />\n            </td>\n          </tr>\n        );\n      }\n    };\n  },\n  { name: \"DiffUnifiedContentLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { computed, defineComponent, ref } from \"vue\";\n\nimport { SplitSide } from \"..\";\nimport { useEnableWrap, useExtendData, useSlots } from \"../context\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffUnifiedExtendLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const extendData = useExtendData();\n\n    const slots = useSlots();\n\n    const enableWrap = useEnableWrap();\n\n    const unifiedItem = computed(() => props.diffFile.getUnifiedLine(props.index));\n\n    const oldExtend = computed(() => extendData.value?.oldFile?.[unifiedItem.value.oldLineNumber]);\n\n    const newExtend = computed(() => extendData.value?.newFile?.[unifiedItem.value.newLineNumber]);\n\n    const currentIsHidden = computed(() => unifiedItem.value.isHidden);\n\n    const currentIsShow = computed(() =>\n      Boolean((oldExtend.value || newExtend.value) && !currentIsHidden.value && slots.extend)\n    );\n\n    const width = useDomWidth({\n      selector: ref(\".unified-diff-table-wrapper\"),\n      enable: currentIsShow,\n    });\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-extend`} data-state=\"extend\" class=\"diff-line diff-line-extend\">\n          <td class=\"diff-line-extend-content p-0 align-top\" colspan={2}>\n            <div class=\"diff-line-extend-wrapper sticky left-0 z-[1]\" style={{ width: width.value + \"px\" }}>\n              {(enableWrap.value ? true : width.value > 0) &&\n                oldExtend.value &&\n                slots.extend({\n                  diffFile: props.diffFile,\n                  side: SplitSide.old,\n                  lineNumber: unifiedItem.value.oldLineNumber,\n                  data: oldExtend.value.data,\n                  onUpdate: props.diffFile.notifyAll,\n                })}\n              {(enableWrap.value ? true : width.value > 0) &&\n                newExtend.value &&\n                slots.extend({\n                  diffFile: props.diffFile,\n                  side: SplitSide.new,\n                  lineNumber: unifiedItem.value.newLineNumber,\n                  data: newExtend.value.data,\n                  onUpdate: props.diffFile.notifyAll,\n                })}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffUnifiedExtendLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { composeLen } from \"@git-diff-view/core\";\nimport {\n  hunkContentBGName,\n  hunkContentColorName,\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n  diffAsideWidthName,\n} from \"@git-diff-view/utils\";\nimport { computed, defineComponent, ref } from \"vue\";\n\nimport { useEnableWrap } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffUnifiedHunkLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const currentHunk = computed(() => props.diffFile.getUnifiedHunkLine(props.index));\n\n    const enableExpand = computed(() => props.diffFile.getExpandEnabled());\n\n    const couldExpand = computed(() => enableExpand.value && currentHunk.value && currentHunk.value.unifiedInfo);\n\n    const enableWrap = useEnableWrap();\n\n    const currentIsShow = ref(\n      currentHunk.value &&\n        currentHunk.value.unifiedInfo &&\n        currentHunk.value.unifiedInfo.startHiddenIndex < currentHunk.value.unifiedInfo.endHiddenIndex\n    );\n\n    const currentIsEnableAll = ref(\n      currentHunk.value &&\n        currentHunk.value.unifiedInfo &&\n        currentHunk.value.unifiedInfo.endHiddenIndex - currentHunk.value.unifiedInfo.startHiddenIndex < composeLen\n    );\n\n    const currentIsFirstLine = computed(() => currentHunk.value && currentHunk.value.isFirst);\n\n    const currentIsLastLine = computed(() => currentHunk.value && currentHunk.value.isLast);\n\n    const currentIsPureHunk = computed(\n      () => currentHunk.value && props.diffFile._getIsPureDiffRender() && !currentHunk.value.unifiedInfo\n    );\n\n    useSubscribeDiffFile(props, () => {\n      currentIsShow.value =\n        currentHunk.value &&\n        currentHunk.value.unifiedInfo &&\n        currentHunk.value.unifiedInfo.startHiddenIndex < currentHunk.value.unifiedInfo.endHiddenIndex;\n\n      currentIsEnableAll.value =\n        currentHunk.value &&\n        currentHunk.value.unifiedInfo &&\n        currentHunk.value.unifiedInfo.endHiddenIndex - currentHunk.value.unifiedInfo.startHiddenIndex < composeLen;\n    });\n\n    return () => {\n      if (!currentIsShow.value && !currentIsPureHunk.value) return null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-hunk`} data-state=\"hunk\" class=\"diff-line diff-line-hunk\">\n          <td\n            class=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[100px] select-none\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n              width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n            }}\n          >\n            {couldExpand.value ? (\n              currentIsFirstLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => props.diffFile.onUnifiedHunkExpand(\"up\", props.index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : currentIsLastLine.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => props.diffFile.onUnifiedHunkExpand(\"down\", props.index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : currentIsEnableAll.value ? (\n                <button\n                  class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => props.diffFile.onUnifiedHunkExpand(\"all\", props.index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => props.diffFile.onUnifiedHunkExpand(\"down\", props.index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    class=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => props.diffFile.onUnifiedHunkExpand(\"up\", props.index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div class=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            class=\"diff-line-hunk-content pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          >\n            <div\n              class=\"pl-[1.5em]\"\n              style={{\n                whiteSpace: enableWrap.value ? \"pre-wrap\" : \"pre\",\n                wordBreak: enableWrap.value ? \"break-all\" : \"initial\",\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.value.unifiedInfo?.plainText || currentHunk.value.text}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffUnifiedHunkLine\", props: [\"index\", \"diffFile\", \"lineNumber\"] }\n);\n", "import { computed, defineComponent, ref } from \"vue\";\n\nimport { SplitSide } from \"..\";\nimport { useEnableWrap, useSetWidget, useSlots, useWidget } from \"../context\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffUnifiedWidgetLine = defineComponent(\n  (props: { index: number; diffFile: DiffFile; lineNumber: number }) => {\n    const slots = useSlots();\n\n    const widget = useWidget();\n\n    const setWidget = useSetWidget();\n\n    const enableWrap = useEnableWrap();\n\n    const unifiedItem = computed(() => props.diffFile.getUnifiedLine(props.index));\n\n    const oldWidget = computed(\n      () =>\n        unifiedItem.value?.oldLineNumber &&\n        widget.value.side === SplitSide.old &&\n        widget.value.lineNumber === unifiedItem.value.oldLineNumber\n    );\n\n    const newWidget = computed(\n      () =>\n        unifiedItem.value?.newLineNumber &&\n        widget.value.side === SplitSide.new &&\n        widget.value.lineNumber === unifiedItem.value.newLineNumber\n    );\n\n    const currentIsHidden = computed(() => unifiedItem.value.isHidden);\n\n    const currentIsShow = computed(\n      () => (oldWidget.value || newWidget.value) && !currentIsHidden.value && !!slots.widget\n    );\n\n    const onCloseWidget = () => setWidget({});\n\n    const width = useDomWidth({\n      selector: ref(\".unified-diff-table-wrapper\"),\n      enable: currentIsShow,\n    });\n\n    return () => {\n      if (!currentIsShow.value) return null;\n\n      return (\n        <tr data-line={`${props.lineNumber}-widget`} data-state=\"widget\" class=\"diff-line diff-line-widget\">\n          <td class=\"diff-line-widget-content p-0\" colspan={2}>\n            <div class=\"diff-line-widget-wrapper sticky left-0 z-[1]\" style={{ width: width.value + \"px\" }}>\n              {(enableWrap.value ? true : width.value > 0) &&\n                oldWidget.value &&\n                slots.widget?.({\n                  diffFile: props.diffFile,\n                  side: SplitSide.old,\n                  lineNumber: unifiedItem.value.oldLineNumber,\n                  onClose: onCloseWidget,\n                })}\n              {(enableWrap.value ? true : width.value > 0) &&\n                newWidget.value &&\n                slots.widget?.({\n                  diffFile: props.diffFile,\n                  side: SplitSide.new,\n                  lineNumber: unifiedItem.value.newLineNumber,\n                  onClose: onCloseWidget,\n                })}\n            </div>\n          </td>\n        </tr>\n      );\n    };\n  },\n  { name: \"DiffUnifiedWidgetLine\", props: [\"diffFile\", \"index\", \"lineNumber\"] }\n);\n", "import { getUnifiedContentLine } from \"@git-diff-view/core\";\nimport { diffAsideWidthName, diffFontSizeName, getDiffIdFromElement, removeAllSelection } from \"@git-diff-view/utils\";\nimport { Fragment, computed, defineComponent, ref } from \"vue\";\n\nimport { useEnableWrap, useFontSize } from \"../context\";\nimport { useSubscribeDiffFile } from \"../hooks/useSubscribeDiffFile\";\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffUnifiedContentLine } from \"./DiffUnifiedContentLine\";\nimport { DiffUnifiedExtendLine } from \"./DiffUnifiedExtendLine\";\nimport { DiffUnifiedHunkLine } from \"./DiffUnifiedHunkLine\";\nimport { DiffUnifiedWidgetLine } from \"./DiffUnifiedWidgetLine\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffUnifiedView = defineComponent(\n  (props: { diffFile: DiffFile }) => {\n    const lines = ref(getUnifiedContentLine(props.diffFile));\n\n    const maxText = computed(() =>\n      Math.max(props.diffFile.unifiedLineLength, props.diffFile.fileLineLength).toString()\n    );\n\n    useSubscribeDiffFile(props, (diffFile) => {\n      lines.value = getUnifiedContentLine(diffFile);\n    });\n\n    const fontSize = useFontSize();\n\n    const enableWrap = useEnableWrap();\n\n    const selectState = { current: undefined as boolean | undefined };\n\n    const styleRef = ref<HTMLStyleElement | null>(null);\n\n    const onSelect = (state?: boolean) => {\n      const ele = styleRef.value;\n\n      if (!ele) return;\n\n      if (state === undefined) {\n        ele.textContent = \"\";\n      } else {\n        const id = `diff-root${props.diffFile.getId()}`;\n        ele.textContent = `#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n      }\n    };\n\n    const onMouseDown = (e: MouseEvent) => {\n      let ele = e.target as HTMLElement;\n\n      if (ele && ele?.nodeName === \"BUTTON\") {\n        removeAllSelection();\n        return;\n      }\n\n      const id = getDiffIdFromElement(ele as HTMLElement);\n\n      if (id && id !== `diff-root${props.diffFile.getId()}`) {\n        return;\n      }\n\n      while (ele && ele instanceof HTMLElement) {\n        const state = ele.getAttribute(\"data-state\");\n        if (state) {\n          if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n            if (selectState.current !== false) {\n              selectState.current = false;\n              onSelect(false);\n              removeAllSelection();\n            }\n          } else {\n            if (selectState.current !== true) {\n              selectState.current = true;\n              onSelect(true);\n              removeAllSelection();\n            }\n          }\n          return;\n        }\n        ele = ele.parentElement;\n      }\n    };\n\n    const font = computed(() => ({ fontSize: fontSize.value + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }));\n\n    const width = useTextWidth({ text: maxText, font });\n\n    const computedWidth = computed(() => Math.max(40, width.value + 10));\n\n    return () => {\n      return (\n        <div\n          class={`unified-diff-view ${enableWrap.value ? \"unified-diff-view-wrap\" : \"unified-diff-view-normal\"} w-full`}\n        >\n          <style data-select-style ref={styleRef} />\n          <div\n            class=\"unified-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n            style={{\n              [diffAsideWidthName]: `${Math.round(computedWidth.value)}px`,\n              fontFamily: \"Menlo, Consolas, monospace\",\n              fontSize: `var(${diffFontSizeName})`,\n            }}\n          >\n            <table\n              class={`unified-diff-table w-full border-collapse border-spacing-0 ${enableWrap.value ? \"table-fixed\" : \"\"}`}\n            >\n              <colgroup>\n                <col class=\"unified-diff-table-num-col\" />\n                <col class=\"unified-diff-table-content-col\" />\n              </colgroup>\n              <thead class=\"hidden\">\n                <tr>\n                  <th scope=\"col\">line number</th>\n                  <th scope=\"col\">line content</th>\n                </tr>\n              </thead>\n              <tbody class=\"diff-table-body leading-[1.6]\" onMousedown={onMouseDown}>\n                {lines.value.map((item) => (\n                  <Fragment key={item.index}>\n                    <DiffUnifiedHunkLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffUnifiedContentLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffUnifiedWidgetLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                    <DiffUnifiedExtendLine index={item.index} lineNumber={item.lineNumber} diffFile={props.diffFile} />\n                  </Fragment>\n                ))}\n                <DiffUnifiedHunkLine\n                  index={props.diffFile.unifiedLineLength}\n                  lineNumber={props.diffFile.unifiedLineLength}\n                  diffFile={props.diffFile}\n                />\n              </tbody>\n            </table>\n          </div>\n        </div>\n      );\n    };\n  },\n  { props: [\"diffFile\"], name: \"DiffUnifiedView\" }\n);\n", "import { DiffFile, _cacheMap, SplitSide } from \"@git-diff-view/core\";\nimport { diffFontSizeName, DiffModeEnum } from \"@git-diff-view/utils\";\nimport { defineComponent, provide, ref, watch, watchEffect, computed, onUnmounted } from \"vue\";\n\nimport {\n  idSymbol,\n  modeSymbol,\n  fontSizeSymbol,\n  enableWrapSymbol,\n  enableHighlightSymbol,\n  enableAddWidgetSymbol,\n  extendDataSymbol,\n  slotsSymbol,\n  onAddWidgetClickSymbol,\n  widgetStateSymbol,\n  setWidgetStateSymbol,\n  mountedSymbol,\n  domSymbol,\n} from \"../context\";\nimport { useIsMounted } from \"../hooks/useIsMounted\";\nimport { useProvide } from \"../hooks/useProvide\";\n\nimport { DiffSplitView } from \"./DiffSplitView\";\nimport { DiffUnifiedView } from \"./DiffUnifiedView\";\n\nimport type { DiffHighlighter } from \"@git-diff-view/core\";\nimport type { CSSProperties, SlotsType } from \"vue\";\n\n_cacheMap.name = \"@git-diff-view/vue\";\n\nexport { SplitSide, DiffModeEnum };\n\nexport type DiffViewProps<T> = {\n  data?: {\n    oldFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n    newFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n    hunks: string[];\n  };\n  extendData?: { oldFile?: Record<string, { data: T }>; newFile?: Record<string, { data: T }> };\n  initialWidgetState?: { side: SplitSide; lineNumber: number };\n  diffFile?: DiffFile;\n  class?: string;\n  style?: CSSProperties;\n  registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\">;\n  diffViewMode?: DiffModeEnum;\n  diffViewWrap?: boolean;\n  diffViewTheme?: \"light\" | \"dark\";\n  diffViewFontSize?: number;\n  diffViewHighlight?: boolean;\n  diffViewAddWidget?: boolean;\n};\n\ntype typeSlots = SlotsType<{\n  widget: { lineNumber: number; side: SplitSide; diffFile: DiffFile; onClose: () => void };\n  extend: { lineNumber: number; side: SplitSide; data: any; diffFile: DiffFile; onUpdate: () => void };\n}>;\n\n// vue 组件打包目前无法支持范型 也不支持 slots\nexport const DiffView = defineComponent<\n  DiffViewProps<any>,\n  { onAddWidgetClick: (lineNumber: number, side: SplitSide) => void },\n  \"onAddWidgetClick\",\n  typeSlots\n>(\n  (props, options) => {\n    const getInstance = () => {\n      if (props.diffFile) {\n        const diffFile = DiffFile.createInstance({});\n        diffFile._mergeFullBundle(props.diffFile._getFullBundle());\n        return diffFile;\n      }\n      if (props.data)\n        return new DiffFile(\n          props.data.oldFile?.fileName || \"\",\n          props.data.oldFile?.content || \"\",\n          props.data.newFile?.fileName || \"\",\n          props.data.newFile?.content || \"\",\n          props.data.hunks || [],\n          props.data.oldFile?.fileLang || \"\",\n          props.data.newFile?.fileLang || \"\"\n        );\n      return null;\n    };\n\n    const diffFile = ref<DiffFile>(getInstance());\n\n    const id = ref(diffFile.value?.getId?.());\n\n    const widgetState = ref<{ side?: SplitSide; lineNumber?: number }>({});\n\n    const wrapperRef = ref<HTMLDivElement>();\n\n    const setWidget = (v: { side?: SplitSide; lineNumber?: number }) => {\n      if (typeof options.slots.widget === \"function\") {\n        widgetState.value = v;\n      }\n    };\n\n    const enableHighlight = computed(() => props.diffViewHighlight ?? true);\n\n    const theme = computed(() => props.diffViewTheme);\n\n    watch(\n      () => props.diffFile,\n      () => {\n        diffFile.value?.clear?.();\n        diffFile.value = getInstance();\n      },\n      { immediate: true }\n    );\n\n    watch(\n      () => props.initialWidgetState,\n      () => {\n        if (props.initialWidgetState) {\n          widgetState.value = {\n            side: props.initialWidgetState.side,\n            lineNumber: props.initialWidgetState.lineNumber,\n          };\n        }\n      },\n      { immediate: true, deep: true }\n    );\n\n    watch(\n      () => props.data,\n      () => {\n        diffFile.value?.clear?.();\n        diffFile.value = getInstance();\n      },\n      { immediate: true, deep: true }\n    );\n\n    watch(\n      () => diffFile.value,\n      () => (widgetState.value = {})\n    );\n\n    const isMounted = useIsMounted();\n\n    const initSubscribe = (onClean: (cb: () => void) => void) => {\n      if (!isMounted.value || !diffFile.value || !props.diffFile) return;\n      const instance = diffFile.value as DiffFile;\n      props.diffFile._addClonedInstance(instance);\n      onClean(() => props.diffFile._delClonedInstance(instance));\n    };\n\n    const initDiff = () => {\n      if (!isMounted.value || !diffFile.value) return;\n      const instance = diffFile.value;\n      instance.initTheme(theme.value);\n      instance.initRaw();\n      instance.buildSplitDiffLines();\n      instance.buildUnifiedDiffLines();\n    };\n\n    const initSyntax = () => {\n      if (!isMounted.value || !diffFile.value) return;\n\n      const instance = diffFile.value;\n\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      theme.value;\n\n      if (enableHighlight.value) {\n        instance.initSyntax({\n          registerHighlighter: props.registerHighlighter,\n        });\n      }\n\n      instance.notifyAll();\n    };\n\n    const initAttribute = (onClean: (cb: () => void) => void) => {\n      if (!isMounted.value || !diffFile.value || !wrapperRef.value) return;\n      const instance = diffFile.value;\n\n      const init = () => {\n        wrapperRef.value?.setAttribute(\"data-theme\", instance._getTheme() || \"light\");\n        wrapperRef.value?.setAttribute(\"data-highlighter\", instance._getHighlighterName());\n      };\n\n      init();\n\n      const cb = instance.subscribe(init);\n\n      onClean(() => cb());\n    };\n\n    const initId = (onClean: (cb: () => void) => void) => {\n      if (!diffFile.value) return;\n      const instance = diffFile.value;\n      id.value = instance.getId();\n      onClean(() => instance.clearId());\n    };\n\n    watchEffect((onClean) => initSubscribe(onClean));\n\n    watchEffect(() => initDiff());\n\n    watchEffect(() => initSyntax());\n\n    watchEffect((onClean) => initId(onClean));\n\n    watchEffect((onClean) => initAttribute(onClean));\n\n    provide(idSymbol, id);\n\n    provide(domSymbol, wrapperRef);\n\n    provide(mountedSymbol, isMounted);\n\n    provide(slotsSymbol, options.slots);\n\n    provide(onAddWidgetClickSymbol, options.emit);\n\n    provide(widgetStateSymbol, widgetState);\n\n    provide(setWidgetStateSymbol, setWidget);\n\n    useProvide(props, \"diffViewMode\", modeSymbol, { defaultValue: DiffModeEnum.SplitGitHub });\n\n    useProvide(props, \"diffViewFontSize\", fontSizeSymbol, { defaultValue: 14 });\n\n    useProvide(props, \"diffViewWrap\", enableWrapSymbol);\n\n    useProvide(props, \"diffViewHighlight\", enableHighlightSymbol);\n\n    useProvide(props, \"diffViewAddWidget\", enableAddWidgetSymbol);\n\n    useProvide(props, \"extendData\", extendDataSymbol, { deepWatch: true });\n\n    onUnmounted(() => diffFile.value?.clear?.());\n\n    options.expose({ getDiffFileInstance: () => diffFile.value });\n\n    return () => {\n      if (!diffFile.value) return null;\n\n      return (\n        <div\n          class=\"diff-tailwindcss-wrapper\"\n          data-component=\"git-diff-view\"\n          data-theme={diffFile.value._getTheme() || \"light\"}\n          data-version={__VERSION__}\n          data-highlighter={diffFile.value._getHighlighterName()}\n          ref={wrapperRef}\n        >\n          <div class=\"diff-style-root\" style={{ [diffFontSizeName]: (props.diffViewFontSize || 14) + \"px\" }}>\n            <div\n              // fix ssr mismatch error\n              id={isMounted.value ? `diff-root${id.value}` : undefined}\n              class={\"diff-view-wrapper\" + (props.class ? ` ${props.class}` : \"\")}\n              style={props.style}\n            >\n              {!props.diffViewMode || props.diffViewMode & DiffModeEnum.Split ? (\n                <DiffSplitView key={DiffModeEnum.Split} diffFile={diffFile.value as DiffFile} />\n              ) : (\n                <DiffUnifiedView key={DiffModeEnum.Unified} diffFile={diffFile.value as DiffFile} />\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    };\n  },\n  {\n    name: \"DiffView\",\n    props: [\n      \"data\",\n      \"class\",\n      \"diffFile\",\n      \"diffViewAddWidget\",\n      \"diffViewFontSize\",\n      \"diffViewHighlight\",\n      \"diffViewMode\",\n      \"diffViewWrap\",\n      \"diffViewTheme\",\n      \"extendData\",\n      \"registerHighlighter\",\n      \"initialWidgetState\",\n      \"style\",\n    ],\n    // expose: [\"getDiffView\"],\n    slots: Object as typeSlots,\n  }\n);\n\nexport const version = __VERSION__;\n"],
  "mappings": "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",
  "names": ["instance", "_TextMeasure_getInstance", "NewLineSymbol", "DiffModeEnum", "useIsMounted", "DiffSplitAddWidget", "side", "className", "lineNumber", "onWidgetClick", "onOpenAddWidget", "_createVNode", "width", "diffFontSizeName", "height", "top", "color", "addWidgetColorName", "backgroundColor", "addWidgetBGName", "onClick", "_createTextVNode", "DiffUnifiedAddWidget", "DiffNoNewLine", "DiffString", "rawLine", "diffLine", "operator", "plainLine", "enableWrap", "enableTemplate", "changes", "hasLineChange", "isNewLineSymbolChanged", "newLineSymbol", "plainTemplate", "getPlainDiffTemplate", "NEWLINE", "range", "str1", "slice", "location", "str2", "length", "str3", "isLast", "includes", "_str2", "replace", "addContentHighlightBGName", "delContentHighlightBGName", "_Fragment", "getSymbol", "template", "getPlainLineTemplate", "value", "DiffSyntax", "syntaxLine", "syntaxTemplate", "getSyntaxDiffTemplate", "nodeList", "map", "node", "wrapper", "index", "endIndex", "startIndex", "properties", "join", "style", "index1", "index2", "isStart", "isEnd", "borderTopLeftRadius", "undefined", "borderBottomLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "getSyntaxLineTemplate", "DiffContent", "diffFile", "enableHighlight", "isAdded", "type", "DiffLineType", "Add", "isDelete", "Delete", "isMaxLineLengthToIgnoreSyntax", "isEnableTemplate", "getIsEnableTemplate", "whiteSpace", "wordBreak", "DiffSplitContentLine", "defineComponent", "props", "setWidget", "useSetWidget", "enableAddWidget", "useEnableAddWidget", "useEnableHighlight", "onAddWidgetClick", "useOnAddWidgetClick", "currentLine", "computed", "SplitSide", "old", "getSplitLeftLine", "getSplitRightLine", "currentLineHasDiff", "diff", "currentLineHasChange", "checkDiffLineIncludeChange", "currentLineHasHidden", "isHidden", "currentLineHasContent", "currentSyntaxLine", "ref", "getOldSyntaxLine", "getNewSyntaxLine", "currentPlainLine", "getOldPlainLine", "getNewPlainLine", "useSubscribeDiffFile", "contentBG", "getContentBG", "lineNumberBG", "getLineNumberBG", "plainLineNumberColorName", "expandLineNumberColorName", "diffAsideWidthName", "minWidth", "maxWidth", "opacity", "emptyBGName", "name", "cb", "DiffSplitExtendLine", "extendData", "useExtendData", "slots", "useSlots", "lineSelector", "lineWrapperSelector", "wrapperSelector", "oldLine", "newLine", "enableExpand", "getExpandEnabled", "oldLineExtend", "oldFile", "newLineExtend", "newFile", "currentItem", "currentIsHidden", "currentExtend", "currentLineNumber", "currentIsShow", "Boolean", "extend", "currentEnable", "extendSide", "new", "useSyncHeight", "selector", "enable", "useDomWidth", "data", "onUpdate", "notifyAll", "ExpandDown", "ExpandUp", "ExpandAll", "DiffSplitHunkLineGitHub", "currentHunk", "getSplitHunkLine", "couldExpand", "splitInfo", "currentShowExpand", "currentSyncHeightSide", "currentIsFirstLine", "isFirst", "currentIsLastLine", "currentIsPureHunk", "_getIsPureDiffRender", "currentShowExpandAll", "endHiddenIndex", "startHiddenIndex", "composeLen", "currentEnableSyncHeight", "hunkContentBGName", "hunkLineNumberBGName", "onSplitHunkExpand", "hunkContentColorName", "plainText", "text", "DiffSplitHunkLineGitLab", "DiffSplitHunkLine", "diffViewMode", "useMode", "SplitGitHub", "Split", "DiffSplitWidgetLine", "widget", "useWidget", "oldLineWidget", "newLineWidget", "currentWidget", "observeSide", "onCloseWidget", "onClose", "DiffSplitViewTable", "lines", "getSplitContentLines", "selectState", "onMouseDown", "e", "ele", "target", "nodeName", "removeAllSelection", "id", "getDiffIdFromElement", "getId", "HTMLElement", "state", "getAttribute", "current", "onSelect", "parentElement", "item", "splitLineLength", "DiffSplitViewNormal", "isMounted", "ref1", "ref2", "styleRef", "maxText", "Math", "max", "fileLineLength", "toString", "initSyncScroll", "onClean", "left", "right", "clean", "syncScroll", "watchPostEffect", "textContent", "fontSize", "useFontSize", "font", "fontFamily", "useTextWidth", "computedWidth", "round", "overscrollBehaviorX", "borderColorName", "oldSyntaxLine", "newSyntaxLine", "oldPlainLine", "newPlainLine", "hasDiff", "hasChange", "hasHidden", "hasOldLine", "hasNewLine", "oldLineIsDelete", "newLineIsAdded", "oldLineContentBG", "oldLineNumberBG", "newLineContentBG", "newLineNumberBG", "borderLeftColor", "borderLeftStyle", "oldExtendRendered", "newExtendRendered", "oldWidgetRendered", "newWidgetRendered", "DiffSplitViewWrap", "DiffSplitView", "useEnableWrap", "DiffUnifiedOldLine", "delLineNumberBGName", "delContentBGName", "DiffUnifiedNewLine", "addLineNumberBGName", "addContentBGName", "DiffUnifiedContentLine", "unifiedItem", "getUnifiedLine", "currentItemHasHidden", "currentItemHasChange", "newLineNumber", "oldLineNumber", "plainLineNumberBGName", "expandContentBGName", "plainContentBGName", "DiffUnifiedExtendLine", "oldExtend", "newExtend", "DiffUnifiedHunkLine", "getUnifiedHunkLine", "unifiedInfo", "currentIsEnableAll", "onUnifiedHunkExpand", "DiffUnifiedWidgetLine", "oldWidget", "newWidget", "DiffUnifiedView", "getUnifiedContentLine", "unifiedLineLength", "_cacheMap", "DiffView", "options", "getInstance", "DiffFile", "createInstance", "_mergeFullBundle", "_getFullBundle", "fileName", "content", "hunks", "fileLang", "widgetState", "wrapperRef", "v", "diffViewHighlight", "theme", "diffViewTheme", "watch", "clear", "immediate", "initialWidgetState", "deep", "initSubscribe", "_addClonedInstance", "_delClonedInstance", "initDiff", "initTheme", "initRaw", "buildSplitDiffLines", "buildUnifiedDiffLines", "initSyntax", "registerHighlighter", "initAttribute", "init", "setAttribute", "_getTheme", "_getHighlighterName", "subscribe", "initId", "clearId", "watchEffect", "provide", "idSymbol", "domSymbol", "mountedSymbol", "slotsSymbol", "onAddWidgetClickSymbol", "emit", "widgetStateSymbol", "setWidgetStateSymbol", "useProvide", "modeSymbol", "defaultValue", "fontSizeSymbol", "enableWrapSymbol", "enableHighlightSymbol", "enableAddWidgetSymbol", "extendDataSymbol", "deepWatch", "onUnmounted", "expose", "getDiffFileInstance", "__VERSION__", "diffViewFontSize", "class", "Unified", "Object", "version"]
}
